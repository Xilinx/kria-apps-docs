<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Development Overview &mdash; Kria™ SOM 2022.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Vitis Accelerator Flow" href="vitis_accel_flow.html" />
    <link rel="prev" title="Kria SOM Accelerator and Custom Carrier Card Firmware Development" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../index.html" class="icon icon-home"> Kria™ SOM
            <img src="../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/dfx.html">Dynamic Function eXchange</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ipmi_eeprom.html">IPMI EEPROM Design Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/yocto.html">Yocto Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/xen.html">XEN Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kd240-docs.html">Kria KD240</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Flows</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generate-hw-configuration">Generate HW Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generate-device-boot-firmware">Generate Device Boot Firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-application-pl-hw-design">Build Application PL HW Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-application-software">Build Application Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-test-on-target">Deploy &amp; Test On-Target</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites-and-assumptions">Prerequisites and Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#som-developer-flow">SOM Developer Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vitis-acceleration-flow"><span class="xref std std-doc">Vitis Acceleration Flow</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vitis-platform-flow"><span class="xref std std-doc">Vitis Platform Flow</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="#vivado-acceleration-flow"><span class="xref std std-doc">Vivado Acceleration Flow</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-carrier-card-flow"><span class="xref std std-doc">Custom Carrier Card Flow</span></a></li>
<li class="toctree-l3"><a class="reference internal" href="#bare-metal-non-linux-application-workflow-on-som">Bare-metal &amp; Non-Linux Application Workflow on SOM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kria-som-references">Kria SOM References</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tool-documentation">Tool Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vitis-documentation">Vitis Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vivado-documentation">Vivado documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#petalinux-documentation">PetaLinux Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#device-tree-generator-documentation">Device Tree Generator Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#file-extension-appendix">File extension appendix:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vitis_accel_flow.html">Vitis Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="vitis_platform_flow.html">Vitis Platform Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="vivado_accel_flow.html">Vivado Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_cc_flow.html">Custom Carrier Card Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare-metal Flow Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kria Vitis Acceleration Flow</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="kria_vitis_acceleration_flow/kria-vitis-acceleration.html">Kria Vitis Acceleration Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="target.html">On-target Utilities and Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootmodes.html">Setting Bootmodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="dtsi_dtbo_generation.html">Generating DTSI and DTBO Overlay Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitstream_management.html">Bitstream Management on Kria SOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="AI_customization.html">AI Customization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications/2021.1/build/html/index.html">2021.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kria™ SOM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Development Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/docs/overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="development-overview">
<h1>Development Overview<a class="headerlink" href="#development-overview" title="Permalink to this heading">¶</a></h1>
<div class="figure align-default" id="id6">
<img alt="Tool Flow" src="../_images/tool_flow.png" />
<p class="caption"><span class="caption-text">Tool flow to generate reference designs for Kria SOM.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>In this document, we will outline four workflows:</p>
<ul class="simple">
<li><p><a class="reference internal" href="vitis_accel_flow.html"><span class="doc">Vitis Accelerator Flow</span></a></p></li>
<li><p><a class="reference internal" href="vitis_platform_flow.html"><span class="doc">Vitis Platform Flow</span></a></p></li>
<li><p><a class="reference internal" href="vivado_accel_flow.html"><span class="doc">Vivado Accelerator Flow</span></a></p></li>
<li><p><a class="reference internal" href="custom_cc_flow.html"><span class="doc">Custom Carrier Card Flow</span></a></p></li>
</ul>
<p><a class="reference internal" href="#som-dev-flow"><span class="std std-ref">SOM Developer Flow</span></a> in the later part of the document gives an overview of how to choose the best flow for developers.</p>
<p>Below is an overview of generalized steps required to develop, build, and run applications on ground up SOM design. Starter Kits provide pre-built reusable content for the HW configuration and device firmware steps, and pre-built references designs the PL HW and application software steps.</p>
<div class="section" id="generate-hw-configuration">
<h3>Generate HW Configuration<a class="headerlink" href="#generate-hw-configuration" title="Permalink to this heading">¶</a></h3>
<p>The MPSoC device requires a boot-time HW configuration for the PS. This is defined in Vivado and developers must configure the MIO related I/O in this configuration step if creating a custom CC. This step is already completed if using a Xilinx provided Starter Kit BSP and/or the Vivado SOM board files which provide automation for configuring the MIO that are fixed by the SOM HW design.</p>
</div>
<div class="section" id="generate-device-boot-firmware">
<h3>Generate Device Boot Firmware<a class="headerlink" href="#generate-device-boot-firmware" title="Permalink to this heading">¶</a></h3>
<p>The boot firmware is the software that runs to support the initialization of the MPSoC platform and is captured as a BOOT.BIN design artifact. If using a Xilinx Starter Kit this step is already completed for developers. However, if developers want to create a custom boot firmware, an A/B user boot partition is provided for easier testing. Refer to Firmware Update chapter of <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/som/1_0/ug1089-kv260-starter-kit.pdf">UG1089</a> or <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Boot-Firmware-Updates">wiki</a>. The SOM Starter Kit uses a primary/secondary boot device flow where the primary boot device contains the BOOT.BIN and the secondary device contains the OS components.</p>
<p>For Kria Starter Kits, the QSPI primary boot device (<code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code>) contains:</p>
<ul class="simple">
<li><p>PMU firmware</p></li>
<li><p>FSBL</p></li>
<li><p>ATF</p></li>
<li><p>U-Boot</p></li>
</ul>
<p>For Kria Starter Kits, the SD card secondary device contains:</p>
<dl class="glossary simple">
<dt id="term-boot.src"><code class="docutils literal notranslate"><span class="pre">boot.src</span></code><a class="headerlink" href="#term-boot.src" title="Permalink to this term">¶</a></dt><dd><p>Script read by U-boot</p>
</dd>
<dt id="term-Image"><code class="docutils literal notranslate"><span class="pre">Image</span></code><a class="headerlink" href="#term-Image" title="Permalink to this term">¶</a></dt><dd><p>Linux Kernel binary</p>
</dd>
<dt id="term-ramdisk.cpio.gz.u-boot"><code class="docutils literal notranslate"><span class="pre">ramdisk.cpio.gz.u-boot</span></code><a class="headerlink" href="#term-ramdisk.cpio.gz.u-boot" title="Permalink to this term">¶</a></dt><dd><p>Linux initramfs</p>
</dd>
<dt id="term-system.dtb"><code class="docutils literal notranslate"><span class="pre">system.dtb</span></code><a class="headerlink" href="#term-system.dtb" title="Permalink to this term">¶</a></dt><dd><p>Linux device Tree</p>
</dd>
<dt id="term-rootfs.tar.gz"><code class="docutils literal notranslate"><span class="pre">rootfs.tar.gz</span></code><a class="headerlink" href="#term-rootfs.tar.gz" title="Permalink to this term">¶</a></dt><dd><p>Root file system</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boot.src</span></code>: script read by U-boot</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Image</span></code>: Linux Kernel binary</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ramdisk.cpio.gz.u-boot</span></code>: Linux initramfs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system.dtb</span></code>: Linux device Tree</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rootfs.tar.gz</span></code>: root file system</p></li>
</ul>
</div>
<div class="section" id="build-application-pl-hw-design">
<h3>Build Application PL HW Design<a class="headerlink" href="#build-application-pl-hw-design" title="Permalink to this heading">¶</a></h3>
<p>The PL design defines the configuration of the PL domain of the MPSoC device on SOM, containing the PL accelerator(s). The PL configuration is defined by the user design and can be captured in Vivado or Vitis based workflows at different levels of abstraction. The design artifact captured from any of the workflows for designing a PL configuration is a bitstream (<code class="docutils literal notranslate"><span class="pre">.bit</span></code>, often required in <code class="docutils literal notranslate"><span class="pre">.bit.bin</span></code> form). This bitstream can be loaded at boot as part of the device boot firmware, or after the OS boot via a runtime library.</p>
<p>If using a Xilinx Kria Starter Kit reference application, the bitstream is provided pre-built and always loaded after Linux boot.</p>
</div>
<div class="section" id="build-application-software">
<h3>Build Application Software<a class="headerlink" href="#build-application-software" title="Permalink to this heading">¶</a></h3>
<p>The application software refers to the SW that runs on the APU and/or RPU PS targets. This SW can be developed through Vitis, PetaLinux, Ubuntu, or other open-source tools (such as Yocto). With the exception for custom Carrier Card Flow, when developing an application for SOM, developers usually do not need to rebuild entire OS. They just need to generate their application and move it onto target file system to execute.</p>
<p>If using a Xilinx Kria Starter Kit reference designs, applications are provided pre-built.</p>
</div>
<div class="section" id="deploy-test-on-target">
<h3>Deploy &amp; Test On-Target<a class="headerlink" href="#deploy-test-on-target" title="Permalink to this heading">¶</a></h3>
<p>Once applications and custom HW designs are generated the user needs to move them to target.</p>
<p>If using the Kria Starter Kit with the Linux reference design, developers can also use <a class="reference internal" href="target.html"><span class="doc">on-target utilities</span></a> to move their applications over and test.</p>
<p>If using the Kria Starter Kit a user can use various boot-modes to test monolithic boot of application software using <a class="reference internal" href="bootmodes.html"><span class="doc">these TCL scripts</span></a> to override the Starter Kit hardware defined QSPI32 boot mode.</p>
</div>
</div>
<div class="section" id="prerequisites-and-assumptions">
<h2>Prerequisites and Assumptions<a class="headerlink" href="#prerequisites-and-assumptions" title="Permalink to this heading">¶</a></h2>
<p>This document assumes you are using Xilinx tools 2022.1. Older tool versions with Petalinux support is archived and can be accessed through links on the left side of the page.</p>
<p>Depending on the scope of customization, selected workflow, and OS choice, different tools will be needed. Please refer to various tool flow sections before determining which tools to install:</p>
<ol class="arabic simple">
<li><p>Vitis tools installation (this will include Vivado)</p></li>
<li><p>Vivado tools installation (if Vitis is not required and installed)</p></li>
<li><p>Device Tree Generator (DTG) and Device Tree Compiler (DTC) installation, refer to <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842279/Build+Device+Tree+Blob">Build Device Tree Blob</a></p></li>
<li><p><a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2022_1/vitis_doc/XSCT.html">XSCT</a> (will be installed as part of Vivado or Vitis)</p></li>
<li><p>KV260-vitis <a class="reference external" href="https://github.com/Xilinx/kria-vitis-platforms">git repository</a>, which contains KV260 and KR260 Vitis platforms, Vitis overlay projects, and their associated Makefiles.</p></li>
<li><p>PetaLinux tools installation with its <cite>minimum installation requirement &lt;https://docs.xilinx.com/r/en-US/ug1144-petalinux-tools-reference-guide/Installation-Requirements&gt;</cite>.</p></li>
<li><p>PetaLinux SOM Starter Kit BSP from <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#PetaLinux-Board-Support-Packages">SOM Wiki</a></p></li>
<li><p>Ubuntu image and development kits from <a class="reference external" href="https://ubuntu.com/download/amd-xilinx">Ubuntu</a></p></li>
</ol>
<p>After you understand the SOM developer flow (shown below), you can refer to the following table for tool requirements to generate PL portion of your applications.</p>
<table class="colwidths-given docutils align-default" id="id7">
<caption><span class="caption-text">Tool Requirements to Generate PL Portion of Application</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 22%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Flows</p></th>
<th class="head"><p>Vitis</p></th>
<th class="head"><p>PetaLinux</p></th>
<th class="head"><p>Vivado</p></th>
<th class="head"><p>Tools for DTBO</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vitis Accelerator Flow</p></td>
<td><p>Required</p></td>
<td><p>Optional</p></td>
<td><p>Required</p></td>
<td><p>Not Needed</p></td>
</tr>
<tr class="row-odd"><td><p>Vitis Platform Flow</p></td>
<td><p>Required</p></td>
<td><p>Optional</p></td>
<td><p>Required</p></td>
<td><p>(XSTC, DTG, DTC) or PetaLinux</p></td>
</tr>
<tr class="row-even"><td><p>Vivado Accelerator Flow</p></td>
<td><p>Not Needed</p></td>
<td><p>Optional</p></td>
<td><p>Required</p></td>
<td><p>(XSTC, DTG, DTC) or PetaLinux</p></td>
</tr>
<tr class="row-odd"><td><p>Custom Carrier Card Flow</p></td>
<td><p>Not Needed</p></td>
<td><p>Optional</p></td>
<td><p>Required</p></td>
<td><p>Not Needed</p></td>
</tr>
<tr class="row-even"><td><p>Baremetal Flow</p></td>
<td><p>Required</p></td>
<td><p>Not Needed</p></td>
<td><p>Required</p></td>
<td><p>Not Needed</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on your decisions, more than one flow can be involved. Refer to the decision tree shown below.</p>
</div>
</div>
<div class="section" id="som-developer-flow">
<span id="som-dev-flow"></span><h2>SOM Developer Flow<a class="headerlink" href="#som-developer-flow" title="Permalink to this heading">¶</a></h2>
<p>Developers may only need to touch parts of the flow to put their own applications on SOM. Based on the scope of hardware and design change there are four different flows developers can leverage when developing a custom application. The choice of flow depends on HW target definition, where the target design intersects with Xilinx’s released reference designs, and tool preference. The following is a decision tree to help guide developers through appropriate workflows:</p>
<img alt="Tool Flow Decision Chart" src="../_images/tool_flow_decision.PNG" />
<p>If developers plan to create their own custom carrier card, they will need to first go through the custom carrier card flow before generating their design through the Vitis or Vivado based tool flows.</p>
<p>If developers are using a Xilinx carrier card or have finished developing the needed base Linux designs for their custom carrier card, they will then need to generate application designs. The recommended tool for applications such as vision and video application is Vitis because Vitis supplies the Vitis_Accel_libraries and allows developers to develop quickly. Alternatively, if those advantages are not needed or wanted, developers can also use Vivado Accelerator flow.</p>
<p>In the Vitis tool flow, developers can leverage the Vitis Platform in the example designs and jump directly into the Vitis Accelerator flow, or they might need to update their platform using Vitis Platform flow before going into the Vitis Accelerator flow.</p>
<img alt="Tool Flow Layers" src="../_images/tool_flow_layers.PNG" />
<p>The diagram above shows the hierarchy between Vivado Extensible design, Vitis Platform and Vitis Accelerators. A Vivado Extensible design is required first to in-take board information and create proper configurations. Then a Vitis Platform can be generated on top of the Vivado Extensible design. After that, Vitis Accelerators and applications can be created in the Vitis Platform. User can intersect in different layers dependent on where their design diverge from Xilinx examples.</p>
<div class="section" id="vitis-acceleration-flow">
<h3><a class="reference internal" href="vitis_accel_flow.html"><span class="doc">Vitis Acceleration Flow</span></a><a class="headerlink" href="#vitis-acceleration-flow" title="Permalink to this heading">¶</a></h3>
<p>This flow is for developers using Xilinx provided SOM Starter Kit Vitis Platforms as a basis for generating their own PL accelerators. Developers use a Vivado Extensible Platform (<code class="docutils literal notranslate"><span class="pre">.xsa</span></code>) file provided by Xilinx and import it into a Vitis Platform project. Developers then create their own overlay accelerator(s) within the bounds of the provided the Vitis platform, and generate a new bitstream (<code class="docutils literal notranslate"><span class="pre">.bit</span></code> file converted to <code class="docutils literal notranslate"><span class="pre">.bit.bin</span></code>) and metadata container file (<code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>). Developers can use the existing device tree blob (<code class="docutils literal notranslate"><span class="pre">.dtb</span></code>) associated with the Xilinx provided Vitis platform. The resulting application accelerator files are then moved to the target SOM platform to be run.</p>
<ul class="simple">
<li><p>Constraints: developers must use the same carrier card and physical peripheral definition as Xilinx provided SOM Starter Kit Vitis Platforms</p></li>
<li><p>Input: Xilinx provided Vitis Platform (<code class="docutils literal notranslate"><span class="pre">.xsa</span></code>), Xilinx provided Vitis platform device tree (<code class="docutils literal notranslate"><span class="pre">.dtbo</span></code>)</p></li>
<li><p>Output: <code class="docutils literal notranslate"><span class="pre">.bit.bin</span></code>, <code class="docutils literal notranslate"><span class="pre">.xclbin</span></code></p></li>
</ul>
<img alt="Tool Flow" src="../_images/tool_flow_vitis_accel.PNG" />
</div>
<div class="section" id="vitis-platform-flow">
<h3><a class="reference internal" href="vitis_platform_flow.html"><span class="doc">Vitis Platform Flow</span></a><a class="headerlink" href="#vitis-platform-flow" title="Permalink to this heading">¶</a></h3>
<p>Developers can create a custom Vitis platform if they require a distinct set of physical PL I/O peripherals than those provided in Xilinx generated platforms. Development starts with the Vivado tool to create an extensible hardware platform. In Vivado, the Kria SOM Starter Kit Vivado board file is provided. It automatically drives the PS subsystem HW configuration and provides pre-defined connectivity for commonly used PL IPs based on the selected carrier card (e.g. MIPI interfaces on KV260 carrier card). Developers use Vivado to generate a custom <code class="docutils literal notranslate"><span class="pre">.xsa</span></code> file to be ported into Vitis as a platform project. Once the platform project is created, then a corresponding device tree overlay is generated. With the extensible <code class="docutils literal notranslate"><span class="pre">.xsa</span></code> and <code class="docutils literal notranslate"><span class="pre">.dtbo</span></code> developers can now follow the same flow outlined in Vitis Accelerator flow. The resulting bitstream, <code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>, and <code class="docutils literal notranslate"><span class="pre">.dtbo</span></code> files are copied into the target.</p>
<ul class="simple">
<li><p>Assumption: Xilinx provided SOM carrier card with associated Vivado board file automation</p></li>
<li><p>Input: Vivado SOM Starter Kit board file</p></li>
<li><p>Output: <code class="docutils literal notranslate"><span class="pre">.dtbo</span></code>, <code class="docutils literal notranslate"><span class="pre">.bit.bin</span></code>, <code class="docutils literal notranslate"><span class="pre">.xclbin</span></code></p></li>
</ul>
<img alt="Tool Flow" src="../_images/tool_flow_vitis_platform.PNG" />
</div>
<div class="section" id="vivado-acceleration-flow">
<h3><a class="reference internal" href="vivado_accel_flow.html"><span class="doc">Vivado Acceleration Flow</span></a><a class="headerlink" href="#vivado-acceleration-flow" title="Permalink to this heading">¶</a></h3>
<p>Developers prefer a traditional HW design flow can generate their PL designs using Vivado. In this flow developers start from the Kria SOM starter kit board files in Vivado and implements their own PL design in Vivado to generate a <code class="docutils literal notranslate"><span class="pre">.xsa</span></code> file and bitstream. The resulting <code class="docutils literal notranslate"><span class="pre">.xsa</span></code> file is used to generate the device tree overlay. Once the PL design (<code class="docutils literal notranslate"><span class="pre">.bit.bin</span></code>) and HW/SW interface definition (<code class="docutils literal notranslate"><span class="pre">.dtbo</span></code>) files are created, they can be copied into the target and managed by dfx-mgr.</p>
<ul class="simple">
<li><p>Assumption: Xilinx built carrier cards with corresponding SOM Starter Kit board file</p></li>
<li><p>Input: SOM Starter Kit board file (in Vivado) or Vivado project released with SOM BSP, developer’s own accelerator designs in Vivado</p></li>
<li><p>Output: <code class="docutils literal notranslate"><span class="pre">.dtbo</span></code>, <code class="docutils literal notranslate"><span class="pre">.bit</span></code></p></li>
</ul>
<img alt="Tool Flow" src="../_images/tool_flow_vivado_accel.PNG" />
</div>
<div class="section" id="custom-carrier-card-flow">
<h3><a class="reference internal" href="custom_cc_flow.html"><span class="doc">Custom Carrier Card Flow</span></a><a class="headerlink" href="#custom-carrier-card-flow" title="Permalink to this heading">¶</a></h3>
<p>Developers creating their own carrier card will create a Vivado project using the Xilinx provided K26 production SOM Vivado board file as a starting point. The K26 board file contains the MIO configuration defined by the SOM HW design, and provides a minimal HW configuration to boot to Linux. The K26 board file does not contain any information specific to a carrier card. Developers then design in their specific custom MIO and PL based physical interfaces to create their own custom HW configuration while following the Kria CC Design Guide (<a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/som/ug1091-carrier-card-design.pdf">UG1091</a>). After creating the integrated SOM + CC configuration, a <code class="docutils literal notranslate"><span class="pre">.xsa</span></code> file is exported. If using Linux, developers then create a Petalinux project to generate boot and OS images for booting Linux. Developers can then use the artifacts to create applications to run on top of the base Linux, using the previously discussed workflows: Vitis Accelerator Flow, Vitis Platform Flow, or Vivado Accelerator Flow.</p>
<ul class="simple">
<li><p>assumption: Using SOM K26 with developer defined carrier card</p></li>
<li><p>input: Vivado K26 SOM board file, customer defined carrier card board configuration</p></li>
<li><p>output: <code class="docutils literal notranslate"><span class="pre">BOOT.bin</span></code>, <code class="docutils literal notranslate"><span class="pre">.wic</span></code> image containing <code class="docutils literal notranslate"><span class="pre">boot.src</span></code>, Image, <code class="docutils literal notranslate"><span class="pre">ramdisk.cpio.gz.u-boot</span></code>, <code class="docutils literal notranslate"><span class="pre">system.dtb</span></code>, <code class="docutils literal notranslate"><span class="pre">rootfs.tar.gz</span></code></p></li>
</ul>
<img alt="Tool Flow" src="../_images/tool_flow_custom_cc.PNG" />
</div>
<div class="section" id="bare-metal-non-linux-application-workflow-on-som">
<h3>Bare-metal &amp; Non-Linux Application Workflow on SOM<a class="headerlink" href="#bare-metal-non-linux-application-workflow-on-som" title="Permalink to this heading">¶</a></h3>
<p>While the Kria Starter Kits examples are Linux centric, they can be used for bare-metal applications by using user application hooks provided in the boot FW architecture and corresponding XSDB debug hooks. The Kria Starter Kit pre-built firmware includes two user partitions labeled “A” and “B”. Only one is active at a time and is controlled by the Image Selector application at boot. Developers can load their bare-metal based application BOOT.BIN to the partition to one of the user partitions and boot their custom application with QSPI32 boot mode. Alternatively, developers can use the Xilinx System Debugger (XSDB) and JTAG to load and boot their application on the Starter Kit.</p>
<ul class="simple">
<li><p>To load custom BOOT.BIN to A/B partitions, use the Linux based xmutil image update utility or use the platform recovery tool. See the <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Boot-Firmware-Updates">Kria Wiki</a> or <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/som/1_0/ug1089-kv260-starter-kit.pdf">UG1089</a> for details on loading a BOOT.BIN to the user A/B partitions.</p></li>
<li><p>For setting JTAG boot via XSDB, see <a class="reference internal" href="bootmodes.html"><span class="doc">Setting Bootmodes</span></a>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a detailed example of creating a simple baremetal application, see <a class="reference internal" href="baremetal.html"><span class="doc">Bare-metal Flow Example</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="kria-som-references">
<h2>Kria SOM References<a class="headerlink" href="#kria-som-references" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Kria SOM <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM">Wiki</a></p></li>
<li><p>Kria SOM K26 Data Sheet <a class="reference external" href="https://docs.xilinx.com/r/en-US/ds987-k26-som">DS987</a></p></li>
<li><p>Kria SOM KV260 Data Sheet <a class="reference external" href="https://docs.xilinx.com/r/en-US/ds986-kv260-starter-kit">DS986</a></p></li>
<li><p>Kria SOM KR260 Data Sheet <a class="reference external" href="https://docs.xilinx.com/r/en-US/ds988-kr260-starter-kit">DS988</a></p></li>
<li><p>Kria SOM KV260 User Guide <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1089-kv260-starter-kit">UG1089</a></p></li>
<li><p>Kria SOM KR260 User Guide <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1092-kr260-starter-kit">UG1092</a></p></li>
<li><p>Kria SOM Carrier Card Design Guide <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1091-carrier-card-design">UG1091</a></p></li>
<li><p>Zynq MPSoC TRM <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1085-zynq-ultrascale-trm/Zynq-UltraScale-Device-Technical-Reference-Manual">UG1085</a></p></li>
</ul>
<div class="section" id="tool-documentation">
<h3>Tool Documentation<a class="headerlink" href="#tool-documentation" title="Permalink to this heading">¶</a></h3>
<div class="section" id="vitis-documentation">
<h4>Vitis Documentation<a class="headerlink" href="#vitis-documentation" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Vitis Unified Software Development Platform <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2022_1/vitis_doc/index.html">User Guides</a></p></li>
<li><p>Vitis Platform <a class="reference external" href="https://www.xilinx.com/products/design-tools/vitis/vitis-platform.html">web-based documentation</a></p></li>
</ul>
</div>
<div class="section" id="vivado-documentation">
<h4>Vivado documentation<a class="headerlink" href="#vivado-documentation" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Vivado Design Suite Tutorial <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2022_1/ug940-vivado-tutorial-embedded-design.pdf">UG940</a></p></li>
<li><p>Vivado Design Flow Overview <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2022_1/ug892-vivado-design-flows-overview.pdf">UG892</a></p></li>
<li><p>Vivado System Level Design Entry <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2022_1/ug895-vivado-system-level-design-entry.pdf">UG895</a></p></li>
<li><p>Vivado Design Suite User Guide <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2022_1/ug896-vivado-ip.pdf">UG896</a></p></li>
<li><p>Vivado Design Suite Using Constraints <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2022_1/ug903-vivado-using-constraints.pdf">UG903</a></p></li>
</ul>
</div>
<div class="section" id="petalinux-documentation">
<h4>PetaLinux Documentation<a class="headerlink" href="#petalinux-documentation" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>PetaLinux User Guide <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2022_1/ug1144-petalinux-tools-reference-guide.pdf">UG1144</a></p></li>
</ul>
</div>
<div class="section" id="device-tree-generator-documentation">
<h4>Device Tree Generator Documentation<a class="headerlink" href="#device-tree-generator-documentation" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18842279/Build+Device+Tree+Blob">Build Device Tree Blob</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="file-extension-appendix">
<h2>File extension appendix:<a class="headerlink" href="#file-extension-appendix" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.bit.bin</span></code>: binary file for bitstream: this is the .bin file that can be generated from Vivado/Vitis instead of <code class="docutils literal notranslate"><span class="pre">.bit</span></code> file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.bsp</span></code>: board support package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.dtb</span></code>: Device Tree Blob. A binary file containing binary data that describes hardware, compiled from .dtb and .dtbi files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.dtbo</span></code>: Device Tree Blob Overlay. A binary file containing hardware that can be overlaid on top of existing .dtb file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.dts</span></code>: Device Tree Source. This is typically the top level (board level) device tree description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.dtsi</span></code>: Device Tree Source Include. These files are typically used to describe hardware on a SoC and in this case, the PL designs as well</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.elf</span></code>: Executable and Linkable Format: contains compiled software</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.wic</span></code>: wic image helps simplify the process of deploying a platform project image to test by including the required boot, rootfs, and related partitions in the image. As a result, all developers need to do is copy the image to a storage device and use it to boot the hardware target device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.xdc</span></code>: Xilinx Design Constraint file: indicate pin mapping, and pin constraints in Vivado</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.xml</span></code>: The XML board file is a configuration file used by Vivado to create board related configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>: device binary file, also known as AXLF file. it is an extensible, future-proof container of (bitstream/platform) hardware as well as software (MPSoC/MicroBlaze ELF files) design data. In the flows above, the <code class="docutils literal notranslate"><span class="pre">.xclbin</span></code> file has information about address space of the PL design</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.xsa</span></code>: Xilinx Shell Archive. These files are generated by Vivado to contain the required hardware information to develop embedded software with Vitis. Can only be opened with Xilinx tools</p></li>
</ul>
</div>
</div>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Kria SOM Accelerator and Custom Carrier Card Firmware Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vitis_accel_flow.html" class="btn btn-neutral float-right" title="Vitis Accelerator Flow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on June 19, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>