<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Generate a Vivado Project from Board Files &mdash; Kria™ SOM 2022.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="AI Customization" href="AI_customization.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../index.html" class="icon icon-home"> Kria™ SOM
            <img src="../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/Kria_doc_map/map.htm">Kria Adventure Map</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/dfx.html">Dynamic Function eXchange</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ipmi_eeprom.html">IPMI EEPROM Design Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/yocto.html">Yocto Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/xen.html">XEN Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kd240-docs.html">Kria KD240</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Flows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Development Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="vitis_accel_flow.html">Vitis Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="vitis_platform_flow.html">Vitis Platform Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="vivado_accel_flow.html">Vivado Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_cc_flow.html">Custom Carrier Card Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare-metal Flow Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kria Vitis Acceleration Flow</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="kria_vitis_acceleration_flow/kria-vitis-acceleration.html">Kria Vitis Acceleration Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Utilities</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="target.html">On-target Utilities and Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootmodes.html">Setting Bootmodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="dtsi_dtbo_generation.html">Generating DTSI and DTBO Overlay Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitstream_management.html">Bitstream Management on Kria SOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="AI_customization.html">AI Customization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generate a Vivado Project from Board Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites-and-assumptions">Prerequisites and Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#apply-vivado-board-file-preset">Apply Vivado Board File Preset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-make-the-platform-an-extensible-platform">Optional: Make the Platform an Extensible Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clean-up-or-connect-interfaces">Clean Up or Connect Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generate-wrapper">Generate Wrapper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generate-bitstream">Generate bitstream</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generate-xsa-file">Generate .xsa file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications/2021.1/build/html/index.html">2021.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kria™ SOM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Generate a Vivado Project from Board Files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/docs/Generate_vivado_project_from_boardfile.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="generate-a-vivado-project-from-board-files">
<h1>Generate a Vivado Project from Board Files<a class="headerlink" href="#generate-a-vivado-project-from-board-files" title="Permalink to this heading">¶</a></h1>
<p>This tutorial details how to generate a base Vivado Project for your StarterKit from Vivado board files.</p>
<ul class="simple">
<li><p>Assumption: AMD provided SOM carrier card with associated Vivado board file automation</p></li>
<li><p>Input: Vivado SOM Starter Kit board files</p></li>
<li><p>Output: .bit or .xsa files</p></li>
</ul>
<div class="section" id="prerequisites-and-assumptions">
<h2>Prerequisites and Assumptions<a class="headerlink" href="#prerequisites-and-assumptions" title="Permalink to this heading">¶</a></h2>
<p>This document assumes that developers will use Vivado versions in which their target starter kit is available in. For an example:</p>
<ol class="simple">
<li><p>KV260 board file is available in Vivado 2021.1 and later</p></li>
<li><p>KR260 board file is available in Vivado 2022.1 and later</p></li>
<li><p>KD240 board file is available in Vivado 2023.1 and later</p></li>
</ol>
<p>Refer to <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/#Vivado-Board-Support-Packages">Wiki</a> for a list of board files required, tool versions that support them.</p>
<p>Tool requirement:</p>
<ul class="simple">
<li><p>Vivado tools installation with the appropriate version</p></li>
</ul>
</div>
<div class="section" id="apply-vivado-board-file-preset">
<h2>Apply Vivado Board File Preset<a class="headerlink" href="#apply-vivado-board-file-preset" title="Permalink to this heading">¶</a></h2>
<p>This flows starts with Vivado board files containing information on K26, K24, KV260 CC, KR260 CC or KD240 CC.</p>
<p>The K26/K24 SOM is supported in Vivado with board files that automate the configuration of the SOM based peripherals, such as DDR, eMMC (for production SOM), etc.</p>
<p>The KV260/KR260/KD240 StarterKit is supported in Vivado with board files that automate the configuration of both StarterKit SOM and CC based peripherals, such as DDR, USB, Ethernet, etc. It does not contain peripheral such as eMMC by default, as thats available on Production SOM only.</p>
<p>These board files are available in Vivado’s board list in “Create Project” wizard. When Vivado starts, click on <code class="docutils literal notranslate"><span class="pre">Quick</span> <span class="pre">Start</span> <span class="pre">-&gt;</span> <span class="pre">Create</span> <span class="pre">Project</span></code>. Leave everything at default and click <code class="docutils literal notranslate"><span class="pre">next</span></code> until you are at “Default Part” selections. click on “Boards” and search for the board you want to generate a Vivado design for.</p>
<p><img alt="Board Files" src="../_images/tool_flow_boardfile.PNG" /></p>
<p>When selecting the Kria starter kit board file, make sure to click on <code class="docutils literal notranslate"><span class="pre">connections</span></code> and connect the connectors between the StarterKit SOM and the carrier card. Click <code class="docutils literal notranslate"><span class="pre">next</span></code> and <code class="docutils literal notranslate"><span class="pre">finish</span></code>.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">Flow</span> <span class="pre">Navigator</span></code>, click on <code class="docutils literal notranslate"><span class="pre">IP</span> <span class="pre">integrator</span> <span class="pre">-&gt;</span> <span class="pre">Create</span> <span class="pre">Block</span> <span class="pre">Design</span></code>. In <code class="docutils literal notranslate"><span class="pre">Diagram</span></code> window, press “+” button to add IP, Search for PS to add <code class="docutils literal notranslate"><span class="pre">Zynq</span> <span class="pre">UltraScale+</span> <span class="pre">MPSoC</span></code>.</p>
<p>Once Zynq_ultra_ps_e_0 block is added to a design, make sure to click <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">Block</span> <span class="pre">Automation</span></code>, keeping <code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">Board</span> <span class="pre">Preset</span></code> selected to apply board file settings.</p>
<p><img alt="Board Files" src="../_images/tool_flow_block_automation_marked.PNG" /></p>
</div>
<div class="section" id="optional-make-the-platform-an-extensible-platform">
<h2>Optional: Make the Platform an Extensible Platform<a class="headerlink" href="#optional-make-the-platform-an-extensible-platform" title="Permalink to this heading">¶</a></h2>
<p>If the project is meant for a Vitis platform, developers can now indicate that the platform is an Extensible Vitis Platform. More details on how to create Extensible Platform can be found in <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Adding-Hardware-Interfaces">UG1393</a>
Project Manager -&gt; Settings -&gt; General -&gt; check “Project is an extensible Vitis Platform”
<img alt="Extensible Platform" src="../_images/extensible_check.PNG" /></p>
<p>Then check window -&gt; platform setup to select interfaces to be exposed as a platform. Below is an example snapshot indicating Vivado is reserving pl_ps_irq0 for the platform to interface with Vitis accelerators.
<img alt="Platform setup" src="../_images/tool_flow_vivado_platform_setup.PNG" /></p>
</div>
<div class="section" id="clean-up-or-connect-interfaces">
<h2>Clean Up or Connect Interfaces<a class="headerlink" href="#clean-up-or-connect-interfaces" title="Permalink to this heading">¶</a></h2>
<p>By default, the board preset have enabled HPM0 and HPM1. If they are not connected, you will get an error when trying to generate .xsa or bitstream. To remove them, in <code class="docutils literal notranslate"><span class="pre">Block</span> <span class="pre">Design</span> <span class="pre">window</span> <span class="pre">-&gt;</span> <span class="pre">Diagram</span></code> and double click on the “Zynq UltraScale + MPSoC” block. Go to <code class="docutils literal notranslate"><span class="pre">PS-PL</span> <span class="pre">Configuration</span> <span class="pre">-&gt;</span> <span class="pre">PS-PL</span> <span class="pre">Interfaces</span> <span class="pre">-&gt;</span> <span class="pre">Master</span> <span class="pre">Interfaces</span></code> to uncheck <code class="docutils literal notranslate"><span class="pre">AXI</span> <span class="pre">HPM0</span> <span class="pre">FPD</span></code> and <code class="docutils literal notranslate"><span class="pre">AXI</span> <span class="pre">HPM1</span> <span class="pre">FPD</span></code> interfaces before clicking <code class="docutils literal notranslate"><span class="pre">OK</span></code>:</p>
<p><img alt="Remove Interfaces" src="../_images/remove_interfaces.PNG" /></p>
<div class="section" id="generate-wrapper">
<h3>Generate Wrapper<a class="headerlink" href="#generate-wrapper" title="Permalink to this heading">¶</a></h3>
<p>We need to now generate a wrapper or top module for the block design:</p>
<p><code class="docutils literal notranslate"><span class="pre">Block</span> <span class="pre">Design</span> <span class="pre">window</span> <span class="pre">-&gt;</span> <span class="pre">sources</span> <span class="pre">window</span> <span class="pre">-&gt;</span> <span class="pre">Design</span> <span class="pre">Sources</span> <span class="pre">-&gt;</span> <span class="pre">right</span> <span class="pre">click</span> <span class="pre">on</span> <span class="pre">design_1</span></code> and select <code class="docutils literal notranslate"><span class="pre">Generate</span> <span class="pre">HDL</span> <span class="pre">wrapper</span></code>:</p>
<p><img alt="wrapper" src="../_images/create_HDL_wrapper.PNG" /></p>
<p>In the pop-up, select “Let Vivado manage wrapper and auto-update” and press OK.</p>
</div>
</div>
<div class="section" id="generate-bitstream">
<h2>Generate bitstream<a class="headerlink" href="#generate-bitstream" title="Permalink to this heading">¶</a></h2>
<p>Now we are ready to generate bitstream. To generate bitstream, click on Program and Debug -&gt; Generate Bitstream. This process will take some time.</p>
<p>Optional: After .bit file has been generated, we may need to convert it to .bit.bin file, a format that xmutil is expecting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    ```shell
    cd $kv260-vitis/platforms/vivado/kv260_ispMipiRx_vcu_DP/project/kv260_ispMipiRx_vcu_DP.runs/impl_1/
    echo &#39;all:{kv260_ispMipiRx_vcu_DP_wrapper.bit}&#39;&gt;bootgen.bif
    bootgen -w -arch zynqmp -process_bitstream bin -image bootgen.bif
    mv kv260_ispMipiRx_vcu_DP_wrapper.bit.bin kv260-smartcam-raspi.bit.bin
    ```
</pre></div>
</div>
</div>
<div class="section" id="generate-xsa-file">
<h2>Generate .xsa file<a class="headerlink" href="#generate-xsa-file" title="Permalink to this heading">¶</a></h2>
<p>After generating bitstream, we can generate a .xsa file for either Yocto, PetaLinux, or Vitis to import. Go to <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">Export</span> <span class="pre">-&gt;</span> <span class="pre">Export</span> <span class="pre">Hardware</span></code> to launch the Export Hardware Platform wizard. This wizard can also be launched by Export Platform button in Flow Navigator or Platform Setup window.</p>
<p>Click through <code class="docutils literal notranslate"><span class="pre">next</span></code>, leaving most in default except in <code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">Platform</span> <span class="pre">State</span></code> select <code class="docutils literal notranslate"><span class="pre">Pre-synthesis,</span> <span class="pre">enable</span> <span class="pre">Include</span> <span class="pre">Bitstream</span></code>
Click Finish.</p>
<p>A .xsa file is generated. The export path is reported in the Tcl console.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h2>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p class="sphinxhide" align="center">Copyright&copy; 2023 Advanced Micro Devices, Inc</p></div>
</div>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="AI_customization.html" class="btn btn-neutral float-left" title="AI Customization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on January 18, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>