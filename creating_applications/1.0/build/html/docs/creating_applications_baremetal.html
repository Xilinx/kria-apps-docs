


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../_static/js/Searchbox.min.js"></script>
	<script type="text/javascript" src="../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="On-target Utilities and Firmware" href="creating_applications_target.html" />
    <link rel="prev" title="Custom Carrier Card Flow" href="creating_applications_custom_cc_flow.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Kria™ SOM
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Home</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/main/build/html/index.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">KRS</a></li>
</ul>
<p class="caption"><span class="caption-text">Flows</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="creating_applications_vitis_accel_flow.html">Vitis Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_applications_vitis_platform_flow.html">Vitis Platform Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_applications_vivado_accel_flow.html">Vivado Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_applications_vivado_accel_example.html">Vivado Accelerator Flow Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_applications_custom_cc_flow.html">Custom Carrier Card Flow</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Bare-metal Flow Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites-and-assumptions">Prerequisites and Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-1-generate-pl-design-in-vivado">Step 1: Generate PL design in Vivado</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-generate-standalone-software-in-vitis">Step 2: Generate Standalone Software in Vitis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-boot-baremetal-applications">Step 3: Boot Baremetal Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#option-1-boot-using-jtag">Option 1: Boot using JTAG</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#option-2-boot-using-boot-bin">Option 2: Boot Using boot.bin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-observe-uart-output">Step 4: Observe UART Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-restoring-linux-booting-image">Optional: Restoring Linux booting image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Common Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="creating_applications_target.html">On-target Utilities and Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_applications_bootmodes.html">Setting Bootmodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_applications_dtsi_dtbo_generation.html">Generating DTSI and DTBO Overlay Files</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../_sources/docs/creating_applications_baremetal.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kria™ SOM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Bare-metal Flow Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/docs/creating_applications_baremetal.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bare-metal-flow-example">
<h1>Bare-metal Flow Example<a class="headerlink" href="#bare-metal-flow-example" title="Permalink to this headline">¶</a></h1>
<p>Developers who wish to use SOM without Linux will be creating a bare-metal(also called standalone) application. This example flow will detail the process of creating a simple
PL design with a BRAM connected to the PS, running on the Vision AI Starter Kit. The flow will then create a standalone software in Vitis to read and write from BRAM. Lastly, the flow will suggest two ways to load
and test the application on SOM.</p>
<ul class="simple">
<li><p>Assumption: Xilinx built carrier cards with corresponding SOM Starter Kit board file</p></li>
<li><p>Input: SOM Starter Kit board files (in Vivado), developer’s own accelerator designs in Vivado (in this case, BRAM)</p></li>
<li><p>Output: <pl>.bit, fsbl.elf, pmufw.elf, <application>.elf, and boot.bin</p></li>
</ul>
<div class="section" id="prerequisites-and-assumptions">
<h2>Prerequisites and Assumptions<a class="headerlink" href="#prerequisites-and-assumptions" title="Permalink to this headline">¶</a></h2>
<p>This document assumes that developers will use 2021.1 or later tools and SOM content releases. The tool versions should match - e.g. use the same tool versions for Vivado, Vitis, Bootgen, XSDB</p>
<ol class="simple">
<li><p>Vivis tools installation	- which will include Vivado, Bootgen, and XSDB</p></li>
</ol>
</div>
<div class="section" id="step-1-generate-pl-design-in-vivado">
<h2>Step 1: Generate PL design in Vivado<a class="headerlink" href="#step-1-generate-pl-design-in-vivado" title="Permalink to this headline">¶</a></h2>
<p>Start Vivado. Choose File -&gt; Project -&gt; New. Then choose RTL project:</p>
<p><img alt="Tool Flow" src="../_images/01_vivado.png" /></p>
<p>Click next, then choose <code class="docutils literal notranslate"><span class="pre">boards</span></code> in <code class="docutils literal notranslate"><span class="pre">Default</span> <span class="pre">Part</span></code> section, choose K26* card, and then click on <code class="docutils literal notranslate"><span class="pre">connections</span></code>:</p>
<p><img alt="Tool Flow" src="../_images/02_vivado.png" /></p>
<p>Choose the carrier card to connect the SOM to, in this case the Vision AI Starter Kit carrier card:</p>
<p><img alt="Tool Flow" src="../_images/03_vivado.png" /></p>
<p>Click through to finish creating the project. Now create a block design:</p>
<p><img alt="Tool Flow" src="../_images/04_vivado.png" /></p>
<p>In Block Design, click on the + sign, and add PS block:</p>
<p><img alt="Tool Flow" src="../_images/05_vivado.png" /></p>
<p>Once the PS block is added, make sure to click <code class="docutils literal notranslate"> <span class="pre">Run</span> <span class="pre">Block</span> <span class="pre">Automation</span></code> and apply the board preset. This will configure the PS block correctly for SOM + Carrier Card:</p>
<p><img alt="Tool Flow" src="../_images/06_vivado.png" /></p>
<p>Now add another block - the AXI BRAM controller:</p>
<p><img alt="Tool Flow" src="../_images/07_vivado.png" /></p>
<p>Click on <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">Connection</span> <span class="pre">Automation</span></code> and connect the S_AXI port of BRAM controller with <code class="docutils literal notranslate"><span class="pre">M_AXI_HPM0</span></code> port of PS:</p>
<p><img alt="Tool Flow" src="../_images/08_vivado.png" /></p>
<p>Click on <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">Connection</span> <span class="pre">Automation</span></code> again and connect BRAM_PORTA to a block ram:</p>
<p><img alt="Tool Flow" src="../_images/09_vivado.png" /></p>
<p>Double click the BRAM controller and configure it to only have 1 BRAM interface:</p>
<p><img alt="Tool Flow" src="../_images/10_vivado.png" /></p>
<p>Double click the PS block, select ``PS-PL Configuration``` and configure it to only enable HPM0 (unselect HPM1):</p>
<p><img alt="Tool Flow" src="../_images/11_vivado.png" /></p>
<p>Now connections are complete. Click on Generate Block Design:</p>
<p><img alt="Tool Flow" src="../_images/12_vivado.png" /></p>
<p>After that is done generating, right click on the block design you have created and select <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">HDL</span> <span class="pre">Wrapper</span></code>, this will set the created block design as top module:</p>
<p><img alt="Tool Flow" src="../_images/13_vivado.png" /></p>
<p>Check the address map of the BRAM slave memory so we can use the same address in software later:</p>
<p><img alt="Tool Flow" src="../_images/14_vivado.png" /></p>
<p>Generate the bitstream:</p>
<p><img alt="Tool Flow" src="../_images/15_vivado.png" /></p>
<p>This will generate a bitstream at:</p>
<p><code class="docutils literal notranslate"><span class="pre">try_1/try_1.runs/impl_1/add_bram_wrapper.bit</span></code></p>
<p>Lastly, export the .xsa file to work the next step in Vitis:</p>
<p><img alt="Tool Flow" src="../_images/16_vivado.png" /></p>
<p>Select <code class="docutils literal notranslate"><span class="pre">Include</span> <span class="pre">bitstream</span></code>:</p>
<p><img alt="Tool Flow" src="../_images/17_vivado.png" /></p>
<p>Launch Vitis by selecting <code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">-&gt;</span> <span class="pre">Layunch</span> <span class="pre">Vitis</span> <span class="pre">IDE</span></code>:</p>
<p><img alt="Tool Flow" src="../_images/18_vivado.png" /></p>
</div>
<div class="section" id="step-2-generate-standalone-software-in-vitis">
<h2>Step 2: Generate Standalone Software in Vitis<a class="headerlink" href="#step-2-generate-standalone-software-in-vitis" title="Permalink to this headline">¶</a></h2>
<p>In Vitis, select Project -&gt; Create Application Project:</p>
<p><img alt="Tool Flow" src="../_images/19_vitis.png" /></p>
<p>Select <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">a</span> <span class="pre">new</span> <span class="pre">platform</span> <span class="pre">from</span> <span class="pre">hardware</span> <span class="pre">(XSA)</span></code> and point to the .xsa file that was just exported in step 1:</p>
<p><img alt="Tool Flow" src="../_images/20_vitis.png" /></p>
<p>Name the application and associate with PSU_cortexa53_0:</p>
<p><img alt="Tool Flow" src="../_images/21_vitis.png" />
<img alt="Tool Flow" src="../_images/22_vitis.png" /></p>
<p>Use <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World</span></code> as a template:
<img alt="Tool Flow" src="../_images/23_vitis.png" /></p>
<p>In <code class="docutils literal notranslate"><span class="pre">helloworld.c</span></code>, alter the code to read and write from BRAM, and then right click <code class="docutils literal notranslate"><span class="pre">hello_world_system</span></code> and select <code class="docutils literal notranslate"><span class="pre">Build</span> <span class="pre">Project</span></code>:</p>
<p><img alt="Tool Flow" src="../_images/24_vitis.png" /></p>
<p>Now developers will have the following files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_workspace</span><span class="o">/</span><span class="n">add_bram_wrapper</span><span class="o">/</span><span class="n">export</span><span class="o">/</span><span class="n">add_bram_wrapper</span><span class="o">/</span><span class="n">sw</span><span class="o">/</span><span class="n">add_bram_wrapper</span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">fsbl</span><span class="o">.</span><span class="n">elf</span>
<span class="n">vitis_workspace</span><span class="o">/</span><span class="n">add_bram_wrapper</span><span class="o">/</span><span class="n">export</span><span class="o">/</span><span class="n">add_bram_wrapper</span><span class="o">/</span><span class="n">sw</span><span class="o">/</span><span class="n">add_bram_wrapper</span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">pmufw</span><span class="o">.</span><span class="n">elf</span>
<span class="n">vitis_workspace</span><span class="o">/</span><span class="n">hello_world</span><span class="o">/</span><span class="n">Debug</span><span class="o">/</span><span class="n">hello_world</span><span class="o">.</span><span class="n">elf</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-boot-baremetal-applications">
<h2>Step 3: Boot Baremetal Applications<a class="headerlink" href="#step-3-boot-baremetal-applications" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to boot baremetal applications - using JTAG to download files and start the application, and programming boot files into boot image sectors of QSPI so that the application boots up upon power up without needing XSDB. JTAG booting is ideal for development and debugging, while QSPI booting is ideal for deployment.</p>
<div class="section" id="option-1-boot-using-jtag">
<h3>Option 1: Boot using JTAG<a class="headerlink" href="#option-1-boot-using-jtag" title="Permalink to this headline">¶</a></h3>
<p>Developers can boot using JTAG using the 4 files generated: fsbl.elf, pmufw.elf, hello_world.elf, add_bram_wrapper.bit using the following XSDB script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proc</span> <span class="n">boot_jtag</span> <span class="p">{</span> <span class="p">}</span> <span class="p">{</span>
<span class="c1">############################</span>
<span class="c1"># Switch to JTAG boot mode #</span>
<span class="c1">############################</span>
<span class="n">targets</span> <span class="o">-</span><span class="nb">set</span> <span class="o">-</span><span class="nb">filter</span> <span class="p">{</span><span class="n">name</span> <span class="o">=~</span> <span class="s2">&quot;PSU&quot;</span><span class="p">}</span>
<span class="c1"># update multiboot to ZERO</span>
<span class="n">mwr</span> <span class="mh">0xffca0010</span> <span class="mh">0x0</span>
<span class="c1"># change boot mode to JTAG</span>
<span class="n">mwr</span> <span class="mh">0xff5e0200</span> <span class="mh">0x0100</span>
<span class="c1"># reset</span>
<span class="n">rst</span> <span class="o">-</span><span class="n">system</span>
<span class="p">}</span>

<span class="n">connect</span>
<span class="n">boot_jtag</span>

<span class="n">after</span> <span class="mi">2000</span>
<span class="n">targets</span> <span class="o">-</span><span class="nb">set</span> <span class="o">-</span><span class="nb">filter</span> <span class="p">{</span><span class="n">name</span> <span class="o">=~</span> <span class="s2">&quot;PSU&quot;</span><span class="p">}</span>
<span class="n">fpga</span> <span class="s2">&quot;add_bram_wrapper.bit&quot;</span>
<span class="n">mwr</span> <span class="mh">0xffca0038</span> <span class="mh">0x1FF</span>

<span class="c1"># Download pmufw.elf</span>
<span class="n">targets</span> <span class="o">-</span><span class="nb">set</span> <span class="o">-</span><span class="nb">filter</span> <span class="p">{</span><span class="n">name</span> <span class="o">=~</span> <span class="s2">&quot;MicroBlaze PMU&quot;</span><span class="p">}</span>
<span class="n">after</span> <span class="mi">500</span>
<span class="n">dow</span> <span class="n">pmufw</span><span class="o">.</span><span class="n">elf</span>
<span class="n">con</span>
<span class="n">after</span> <span class="mi">500</span>

<span class="c1"># Select A53 Core 0</span>
<span class="n">targets</span> <span class="o">-</span><span class="nb">set</span> <span class="o">-</span><span class="nb">filter</span> <span class="p">{</span><span class="n">name</span> <span class="o">=~</span> <span class="s2">&quot;Cortex-A53 #0&quot;</span><span class="p">}</span>
<span class="n">rst</span> <span class="o">-</span><span class="n">processor</span> <span class="o">-</span><span class="n">clear</span><span class="o">-</span><span class="n">registers</span>
<span class="n">dow</span> <span class="n">fsbl</span><span class="o">.</span><span class="n">elf</span>
<span class="n">con</span>
<span class="n">after</span> <span class="mi">10000</span>
<span class="n">stop</span>


<span class="n">dow</span> <span class="n">hello_world</span><span class="o">.</span><span class="n">elf</span>
<span class="n">after</span> <span class="mi">500</span>
<span class="n">con</span>
</pre></div>
</div>
<div class="section" id="option-2-boot-using-boot-bin">
<h4>Option 2: Boot Using boot.bin<a class="headerlink" href="#option-2-boot-using-boot-bin" title="Permalink to this headline">¶</a></h4>
<p>Alternatively, developers can generate a boot.bin file to be programmed into the A/B image update section.</p>
<p>Developers first need to create a <test>.bif file containing the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">the_ROM_image</span><span class="p">:</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">fsbl_config</span><span class="p">]</span> <span class="n">a5x_x64</span>
    <span class="p">[</span><span class="n">pmufw_image</span><span class="p">]</span><span class="n">pmufw</span><span class="o">.</span><span class="n">elf</span>
    <span class="p">[</span><span class="n">bootloader</span><span class="p">]</span><span class="n">fsbl</span><span class="o">.</span><span class="n">elf</span>    
    <span class="p">[</span><span class="n">destination_device</span><span class="o">=</span><span class="n">pl</span><span class="p">]</span><span class="n">add_bram_wrapper</span><span class="o">.</span><span class="n">bit</span>
    <span class="p">[</span><span class="n">destination_cpu</span><span class="o">=</span><span class="n">a5x</span><span class="o">-</span><span class="mi">0</span><span class="p">]</span><span class="n">hello_world</span><span class="o">.</span><span class="n">elf</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Then they need to run <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2021_1/ug1283-bootgen-user-guide.pdf">bootgen</a> to create boot.bin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bootgen</span> <span class="o">-</span><span class="n">arch</span> <span class="n">zynqmp</span> <span class="o">-</span><span class="n">image</span> <span class="n">test</span><span class="o">.</span><span class="n">bif</span> <span class="o">-</span><span class="n">o</span> <span class="n">boot</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<p>Then, use the FW update and recovery utility documented in <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/som/1_0/ug1089-kv260-starter-kit.pdf#page=25">UG1089</a> and <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Stand-alone-FW-Update-&amp;-Recovery-Utility">here</a>
to update the boot firmware. In this example, we have decided to write boot.bin into image A. Make sure to mark Image A as bootable, and as the requested Boot Image so that SOM will boot image A on every power cycle.</p>
<p><img alt="Tool Flow" src="../_images/25_img_recovery.png" /></p>
</div>
</div>
</div>
<div class="section" id="step-4-observe-uart-output">
<h2>Step 4: Observe UART Output<a class="headerlink" href="#step-4-observe-uart-output" title="Permalink to this headline">¶</a></h2>
<p>After step 3, .bit file and the .elf files will be programmed, and developers should observe printouts from uart indicating the ability to write and read from BRAM.</p>
</div>
<div class="section" id="optional-restoring-linux-booting-image">
<h2>Optional: Restoring Linux booting image<a class="headerlink" href="#optional-restoring-linux-booting-image" title="Permalink to this headline">¶</a></h2>
<p>Developers may need to restore Starter Kit back to its default, Linux-booting setting after one of the image sectors had been overwriten with baremetal boot file. In that case, they can download the released Linux booting BOOT.bin from <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Boot-Firmware-Updates">SOM Wiki</a> and program it into one of the image sectors. They will then mark that image sector as bootable and requested image.</p>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2021 Xilinx</p></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="creating_applications_target.html" class="btn btn-neutral float-right" title="On-target Utilities and Firmware" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="creating_applications_custom_cc_flow.html" class="btn btn-neutral float-left" title="Custom Carrier Card Flow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on November 29, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>