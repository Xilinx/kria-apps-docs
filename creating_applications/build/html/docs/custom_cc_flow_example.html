<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Example - Creating a Platform for a Custom Carrier Card &mdash; Kria™ SOM 2022.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bare-metal Flow Example" href="baremetal.html" />
    <link rel="prev" title="Vitis Platform Flow Example - Adding Raspberry Pi Camera to SmartCam’s Platform" href="vitis_platform_flow_smartcam_raspi_example.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../index.html" class="icon icon-home"> Kria™ SOM
            <img src="../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Flows</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="vitis_accel_flow.html">Vitis Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="vitis_platform_flow.html">Vitis Platform Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="vivado_accel_flow.html">Vivado Accelerator Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_cc_flow.html">Custom Carrier Card Flow</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="vivado_accel_example.html">Vivado Accelerator Flow Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="vitis_accel_flow_smartcam_filter2d_example.html">Vitis Accelerator Flow Example - Replacing DPU with Filter2d Accelerator in Smartcam Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="vitis_platform_flow_smartcam_raspi_example.html">Vitis Platform Flow Example - Adding Raspberry Pi Camera to SmartCam’s Platform</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Example - Creating a Platform for a Custom Carrier Card</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-vivado-design">Creating a Vivado design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-ps-connections">Setting up PS connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-board-files">Setting up board files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare-metal Flow Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="target.html">On-target Utilities and Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootmodes.html">Setting Bootmodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="dtsi_dtbo_generation.html">Generating DTSI and DTBO Overlay Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitstream_management.html">Bitstream Management on Kria SOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="AI_customization.html">AI Customization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications/2021.1/build/html/index.html">2021.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kria™ SOM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="examples.html">Examples</a> &raquo;</li>
      <li>Example - Creating a Platform for a Custom Carrier Card</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/docs/custom_cc_flow_example.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="example-creating-a-platform-for-a-custom-carrier-card">
<h1>Example - Creating a Platform for a Custom Carrier Card<a class="headerlink" href="#example-creating-a-platform-for-a-custom-carrier-card" title="Permalink to this heading">¶</a></h1>
<p>Developers will create a custom carrier card to support their production configuration when migrating from Starter Kit based evaluation to the production SOM. They will need to create a base .xsa design suited for their Carrier Card + SOM combo. This example creates a base .xsa design for KV260 (Vision Carrier card + Kria SOM) Starter Kit as an example of how a developer may create their own base designs.</p>
<div class="section" id="creating-a-vivado-design">
<h2>Creating a Vivado design<a class="headerlink" href="#creating-a-vivado-design" title="Permalink to this heading">¶</a></h2>
<p>In Vivado, click on <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Project</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">next</span></code> -&gt; enter <code class="docutils literal notranslate"><span class="pre">kv260_base</span></code> as project name and select project location -&gt; next</p>
<p>select “Project is an extensible Vitis platform” if you plan to continue with Vitis Platform Flow and not Vivado Accelerator Flow.</p>
<p><img alt="customcc" src="../_images/customcc_01.PNG" /></p>
<p>in Default Part page, select “Boards”, search for “Kria” and select the appropiate SOM, in this case we select Kria K26C SOM. We do not click connections because we are creating a design for KV260 manually as an example of creating a project for custom CC.</p>
<p><img alt="customcc" src="../_images/customcc_02.PNG" /></p>
<p>Click <code class="docutils literal notranslate"><span class="pre">Finish</span></code></p>
<p>In <code class="docutils literal notranslate"><span class="pre">Flow</span> <span class="pre">Navigator</span></code> click on <code class="docutils literal notranslate"><span class="pre">IP</span> <span class="pre">Integrator</span> <span class="pre">-&gt;</span> <span class="pre">Create</span> <span class="pre">Block</span> <span class="pre">Design</span></code>. update <code class="docutils literal notranslate"><span class="pre">Design</span> <span class="pre">name</span></code> to <code class="docutils literal notranslate"><span class="pre">base_design</span></code>.</p>
<div class="section" id="setting-up-ps-connections">
<h3>Setting up PS connections<a class="headerlink" href="#setting-up-ps-connections" title="Permalink to this heading">¶</a></h3>
<p>In Diagram tab, click on “+” to add IP. Search for “Zynq UntraScale+ MPSoC” and double click to add. Once the block appears, click on “Run Block Automation”</p>
<p><img alt="customcc" src="../_images/customcc_03.PNG" /></p>
<p>Keep selections of “Apply Board Preset” and click OK. This will apply HW configuration presets that are dictated by the SOM physical design. Special notes on PMU power management functions and default UART are called out in <a class="reference external" href="https://www.xilinx.com/support/documentation/data_sheets/ds987-k26-som.pdf">DS987</a> “MIO Banks” table note #1.</p>
<p><img alt="customcc" src="../_images/customcc_04.PNG" /></p>
<p>Double click on the Zynq Ultrascale+ Block to configure the block. The KV carrier card includes DisplayPort, SD card, UART, and GEM functionality. These physical MIO mappings can be found in the KV carrier card schematic and need to be enabled in I/O configuration design:</p>
<ul class="simple">
<li><p>Check High Speed -&gt; GEM -&gt; GEM 3, leaving default settings (MIO 64… 75)</p></li>
<li><p>Check High Speed -&gt; USB -&gt; USB 0 and then USB 3.0, leaving default setting for USB 0 (MIO 52 .. 63), but change to GT Lane2  for USB 3.0</p></li>
<li><p>Check High Speed -&gt; Display Port, change DPAUX to (MIO 27 .. 30) and Lane Selection to  Dual Lower</p></li>
<li><p>Check Low Speed -&gt; I/O Peripheral -&gt; UART -&gt; UART 1 , change to (MIO 36 … 37)</p></li>
<li><p>Uncheck Low Speed -&gt; Memory Interfaces -&gt;  SD -&gt; SD 0</p></li>
<li><p>Check Low Speed -&gt; Memory Interfaces -&gt; SD -&gt; SD 1 and leave MIO selection at (MIO 39 .. 51), and expand SD1:</p>
<ul>
<li><p>check CD and select MIO 45</p></li>
<li><p>Check Power and select MIO 43</p></li>
</ul>
</li>
</ul>
<p>If we switch over to the PS UltraSccale_ Block design, we should see the following with the same check marks:
<img alt="customcc" src="../_images/customcc_05.PNG" /></p>
<p>When creating your own custom CC card design, you may also want to update Clock Configuration and PS-PL configuration to suit your custom carrier cards. In this case, the default configuration will work for our KV260 and requires no changes.</p>
<p>Click OK to apply settings.</p>
<p>To save the block design in a tcl script, this is the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>write_bd_tcl -no_ip_version -check_ips <span class="nb">false</span> -f &lt;output&gt;.tcl
</pre></div>
</div>
</div>
<div class="section" id="setting-up-board-files">
<h3>Setting up board files<a class="headerlink" href="#setting-up-board-files" title="Permalink to this heading">¶</a></h3>
<p>In the base .xsa designs that we release, there are no PL component - the PS is configured and PL ready for developers to add their own designs. However, when adding some IPs (such as MIPI), there are presets that are applied that has information on the pin connections on the boards. Developers will need to create their own board files. They can also put the pin definition into an .xdc file instead.</p>
<p>Refer to <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug895-vivado-system-level-design-entry">UG895</a> for more information on board files.</p>
<p>SOM Starter Kit presets can be found in Vivado installation folder. For an example they are found in <code class="docutils literal notranslate"><span class="pre">&lt;installation</span> <span class="pre">folder&gt;/Vivado/&lt;version&gt;/data/xhub/boards/XilinxBoardStore/boards/Xilinx/&lt;board&gt;/1.1/</span></code></p>
<p>Developers will want to create their own presets for pin-accessing IPs or put those information in their .xdc files.</p>
<p>To apply the .xml files, copy the kv260/ folder into a chosen <code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code>, and execute the following in Vivado:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>   set_param board.repoPaths <span class="o">[</span>list <span class="s2">&quot;&lt;path&gt;&quot;</span> “&lt;path2&gt;” “...”<span class="o">]</span>
</pre></div>
</div>
<p>Then in step <a class="reference external" href="#creating-a-vivado-design">Creating a Vivado design</a>, select the board file to pair with K26 SOM in below interface by clicking on “connection” and finding the newly defined carrier card board file there.</p>
<p><img alt="interface" src="../_images/customcc_02.PNG" /></p>
<p>If you are trying out the KV260 board files, please change mentioning of “Vision AI Starter Kit carrier card” to “Test Vision AI Starter Kit carrier card” (or other appropiate names) in board.xml and preset.xml in order to differentiate it from the boardfiles already exist in tools.</p>
<p>Note that in preset.xml of KV260, we already define the presets for Zynq MPSoC’s processor subsystem, which was defined manually in <a class="reference external" href="#creating-a-vivado-design">Creating a Vivado design</a>. Therefore for the purpose of this tutorial, we did not apply the board files in order to show you how to manually setup PS connections for a CC.</p>
<p>Alternatively, define all the contraints in .xdc file instead. the .xdc file can be added by <code class="docutils literal notranslate"><span class="pre">File</span></code>-&gt; <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Sources</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">or</span> <span class="pre">create</span> <span class="pre">constraints</span></code></p>
<p>The xdc definition for KV260 interfaces that includes PL definition can be found <a class="reference external" href="https://www.xilinx.com/products/som/kria/k26c-commercial.html#documentation">here</a> as an example.</p>
</div>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<p>After creating the base .xsa design for a custom CC, developers can then go through <a class="reference internal" href="vitis_platform_flow.html"><span class="doc">Vitis Platform Flow</span></a>, <a class="reference internal" href="vivado_accel_flow.html"><span class="doc">Vivado Accelerator Flow</span></a>, or <a class="reference internal" href="baremetal.html"><span class="doc">Baremetal Flow</span></a> to create their appplicartions.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h2>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2021 Xilinx</p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vitis_platform_flow_smartcam_raspi_example.html" class="btn btn-neutral float-left" title="Vitis Platform Flow Example - Adding Raspberry Pi Camera to SmartCam’s Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="baremetal.html" class="btn btn-neutral float-right" title="Bare-metal Flow Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2022, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on October 20, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>