


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/linkid.js"></script>
	    <script type="text/javascript" src="../../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Customizing the AI Models used in the application" href="customize_ai_models.html" />
    <link rel="prev" title="Design Overview" href="introduction.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Kria™ KV260
          

          
          </a>

          
            
            
              <div class="version">
                1.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/index.html">Home</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">KRS</a></li>
</ul>
<p class="caption"><span class="caption-text">KV260 Applications</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../smartcamera_landing.html">Smart Camera</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#overview">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../smartcamera_landing.html#quick-start">Quick Start</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setting up the Board and Application deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-board">Setting up the Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-the-application">Run the Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#files-structure-of-the-application">Files structure of the application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#tutorials">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../aibox-reid/aibox_landing.html">AIBox-ReID</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../defect-detect/defectdetect_landing.html">Defect Detect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlp-smartvision/nlp_smartvision_landing.html">NLP SmartVision</a></li>
</ul>
<p class="caption"><span class="caption-text">Previous Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/2020.2/build/html/index.html">2020.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../_sources/docs/smartcamera/docs/app_deployment.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Kria™ KV260</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../smartcamera_landing.html">Smart Camera</a> &raquo;</li>
        
      <li>Setting up the Board and Application Deployment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/docs/smartcamera/docs/app_deployment.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="../../media/xilinx-logo.png" width="30%"/><h1> Kria&trade; KV260 Vision AI Starter Kit Smart Camera Tutorial</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Setting up the Board and Application Deployment</h1> </td>
 </tr>
</table><div class="section" id="setting-up-the-board-and-application-deployment">
<h1>Setting up the Board and Application Deployment<a class="headerlink" href="#setting-up-the-board-and-application-deployment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document shows how to set up the board and run the smartcam application.</p>
</div>
<div class="section" id="setting-up-the-board">
<h2>Setting up the Board<a class="headerlink" href="#setting-up-the-board" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Note: Skip Step 1, if you have already flashed the SD Card with the KV260 Vision AI Starter Kit Image (kv260-sdcard.img.wic)</p>
</div></blockquote>
<ol>
<li><p>Flash the SD Card</p>
<ul class="simple">
<li><p>Download  the <a class="reference external" href="https://www.xilinx.com/member/forms/download/xef.html?filename=petalinux-sdimage-2021.1-update1.wic.xz">SD Card Image</a> and save it on your computer.</p></li>
<li><p>Connect the microSD to your computer.</p></li>
<li><p>Download the <a class="reference external" href="https://www.balena.io/etcher/">Balena Etcher tool</a> (recommended; available for Window, Linux, and
macOS) required to flash the SD card.</p></li>
<li><p>Follow the instructions in the tool and select the downloaded image to flash onto your microSD card.</p></li>
</ul>
<p><img alt="Balena Etcher" src="../../../_images/balena.png" /></p>
<ul class="simple">
<li><p>Eject the SD card from your computer.</p></li>
</ul>
<p>If you are looking for other OS specific tools to write the image to the SD card refer to <a class="reference external" href="https://www.xilinx.com/products/som/kria/kv260-vision-starter-kit/kv260-getting-started/setting-up-the-sd-card-image.html">KV260 Getting Started Page</a></p>
</li>
<li><p>Hardware Setup:</p>
<p><img alt="GitHub Logo" src="../../../_images/som-board.png" /></p>
<ul class="simple">
<li><p>microSD:</p></li>
</ul>
<p>Insert the SD card into slot at J11.</p>
<ul class="simple">
<li><p>Monitor:</p></li>
</ul>
<p>Before booting, connect a 1080P/4K monitor to the board via either DP or HDMI port.</p>
<p>4K monitor is preferred to demonstrate at the maximum supported resolution.</p>
<ul class="simple">
<li><p>IAS sensor:</p></li>
</ul>
<p>Before power on, install an AR1335 sensor module in J7.</p>
<ul class="simple">
<li><p>UART/JTAG interface:</p></li>
</ul>
<p>For interacting and seeing boot-time information, connect a USB debugger to the J4.</p>
<ul class="simple">
<li><p>You may also use a USB webcam as an input device.</p></li>
</ul>
<p>The webcam is optional video input device supported in the application.</p>
<p>Recommended webcam is the <a class="reference external" href="https://www.logitech.com/en-in/products/webcams/brio-4k-hdr-webcam.960-001105.html">Logitech BRIO</a>.</p>
<ul class="simple">
<li><p>Network connection:</p></li>
</ul>
<p>Connect the Ethernet cable to your local network with DHCP enabled to install packages and run Jupyter Notebooks</p>
<ul class="simple">
<li><p>Audio Pmod setup as RTSP audio input:</p></li>
</ul>
<p>Audio Pmod is optional audio input and output device.</p>
<p>In the Smart camera application only RTSP mode <a class="reference external" href="#rtsp-audio">uses the audio input function</a> to capture audio. Audio is then sent together with the images as RTSP stream and can be received at the client side.</p>
<p>To set it up, first install the Pmod to J2, then connect a microphone or any other sound input device to the <a class="reference external" href="https://store.digilentinc.com/pmod-i2s2-stereo-audio-input-and-output/">line input port</a>. A headphone with a microphone will not work - device needs to be a dedicated input.</p>
<p>Smartcam application does not yet support speakers.</p>
</li>
<li><p>Software Preparation:</p>
<p>You will use a PC having network access to the board as the RTSP client machine.</p>
<p>Make sure that the PC and the KV260 Vision AI Starter Kit are on the same subnet mask.</p>
<p>On the client machine, to receive and play the RTSP stream, we recommend to install FFplay which is part of FFmpeg package.</p>
<p>For Linux, you can install FFmpeg with the package manager of your distribution.</p>
<p>For Windows, you can find install instructions on https://ffmpeg.org/download.html</p>
<p>Other than FFplay, VLC can also be used to play RTSP stream, but sometimes it doesn’t work on some client machines, while the FFplay works well.</p>
</li>
<li><p>Power on the board, and boot the Linux image.</p>
<p>The Linux image will boot into the following login prompt:</p>
<p><code class="docutils literal notranslate"><span class="pre">xilinx-k26-starterkit-2020_2</span> <span class="pre">login:</span></code></p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">petalinux</span></code> user for login. You will be prompted to set a new password
on the first login.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xilinx</span><span class="o">-</span><span class="n">k26</span><span class="o">-</span><span class="n">starterkit</span><span class="o">-</span><span class="mi">2020_2</span> <span class="n">login</span><span class="p">:</span> <span class="n">petalinux</span>
<span class="n">You</span> <span class="n">are</span> <span class="n">required</span> <span class="n">to</span> <span class="n">change</span> <span class="n">your</span> <span class="n">password</span> <span class="n">immediately</span> <span class="p">(</span><span class="n">administrator</span> <span class="n">enforced</span><span class="p">)</span>
<span class="n">New</span> <span class="n">password</span><span class="p">:</span>
<span class="n">Retype</span> <span class="n">new</span> <span class="n">password</span><span class="p">:</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">petalinux</span></code> user does not have root privileges. Most commands used in subsequent tutorials have to be run using <code class="docutils literal notranslate"><span class="pre">sudo</span></code> and you may be prompted to enter your password.</p>
<p><strong>Note:</strong> The root user is disabled by default due to security reasons. If you want to login as root user, follow the below steps, else, ignore this step and continue. Use the petalinux user’s password on the first password prompt, then set a new password for the root user. You can now login as root user using the newly set root user password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>xilinx-k26-starterkit-2020_2:~$ sudo su -l root

We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

Password:
root@xilinx-k26-starterkit-2020_2:~# passwd
New password:
Retype new password:
passwd: password updated successfully
</pre></div>
</div>
</li>
<li><p>Get the latest application package.</p>
<ol>
<li><p>Check the package feed for new updates.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf update
</pre></div>
</div>
<p>Confirm with “Y” when prompted to install new or updated packages.</p>
<p>Sometimes it is needed to clean the local dnf cache first. To do so, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf clean all
</pre></div>
</div>
</li>
<li><p>Get the list of available packages in the feed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xmutil getpkgs
</pre></div>
</div>
</li>
<li><p>Install the package with dnf install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf install packagegroup-kv260-smartcam.noarch
</pre></div>
</div>
<p>System will ask “Is this ok [y/N]:” to download the packages, please type “y” to proceed.</p>
</li>
</ol>
<p>Note: For setups without access to the internet, it is possible to download and use the package locally. Please refer to the <a class="reference internal" href="../../local_package_feed.html"><span class="doc">Install from a local package feed</span></a> for instructions.</p>
</li>
<li><p>Dynamically load the application package.</p>
<p>The firmware consist of bitstream, device tree overlay (dtbo) and xclbin file. The firmware is loaded dynamically on user request once Linux is fully booted. The xmutil utility can be used for that purpose.</p>
<ol>
<li><p>Show the list and status of available acceleration platforms and AI Applications:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">xmutil</span>      <span class="n">listapps</span>
</pre></div>
</div>
</li>
<li><p>Switch to a different platform for different AI Application:</p>
<ul>
<li><p>When xmutil listapps shows that there’s no active accelerator, just activate kv260-smartcam.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">xmutil</span>      <span class="n">loadapp</span> <span class="n">kv260</span><span class="o">-</span><span class="n">smartcam</span>
</pre></div>
</div>
</li>
<li><p>When there’s already another accelerator being activated apart from kv260-smartcam, unload it first, then switch to kv260-smartcam.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">xmutil</span>      <span class="n">unloadapp</span>
<span class="n">sudo</span> <span class="n">xmutil</span>      <span class="n">loadapp</span> <span class="n">kv260</span><span class="o">-</span><span class="n">smartcam</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</li>
<li><p>Getting demo video files suitable for the application:</p>
<p>To be able to demonstrate the function of the application in case you have no MIPI and USB camera in hand, we support the file video source too.</p>
<p>You can download video files from the following links, which is of MP4 format.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pixabay.com/videos/alley-people-walk-street-ukraine-39837/">Facedet / RefineDet AI Task</a></p></li>
<li><p><a class="reference external" href="https://pixabay.com/videos/freeway-traffic-cars-rainy-truck-8358/">ADAS SSD AI Task</a></p></li>
</ul>
<p>Then, you need to transcode it to H264 file which is one supported input format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ffmpeg</span> <span class="o">-</span><span class="n">i</span> <span class="nb">input</span><span class="o">-</span><span class="n">video</span><span class="o">.</span><span class="n">mp4</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">libx264</span> <span class="o">-</span><span class="n">pix_fmt</span> <span class="n">nv12</span> <span class="o">-</span><span class="n">vf</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1920</span><span class="p">:</span><span class="mi">1080</span> <span class="o">-</span><span class="n">r</span> <span class="mi">30</span> <span class="n">output</span><span class="o">.</span><span class="n">nv12</span><span class="o">.</span><span class="n">h264</span>
</pre></div>
</div>
<p>Finally, please upload or copy these transcoded H264 files to the board (by using scp, ftp, or copy onto SD card and finding them in /media/sd-mmcblk0p1/), place it to somewhere under /home/petalinux, which is the home directory of the user you login as.</p>
</li>
</ol>
</div>
<div class="section" id="run-the-application">
<h2>Run the Application<a class="headerlink" href="#run-the-application" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to interact with the application.</p>
<div class="section" id="jupyter-notebook">
<h3>Jupyter notebook<a class="headerlink" href="#jupyter-notebook" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The system will auto start a Jupyter server at <code class="docutils literal notranslate"><span class="pre">/home/petalinux/notebooks</span></code>, with user <code class="docutils literal notranslate"><span class="pre">petalinux</span></code>.</p></li>
<li><p>User need to run following command to install the package shipped notebooks which reside in <code class="docutils literal notranslate"><span class="pre">/opt/xilinx/share/notebooks/smartcam</span></code> to the folder <code class="docutils literal notranslate"><span class="pre">/home/petalinux/notebooks/smartcam</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">smartcam-install.py</span></code></p>
<p>This script also provides more options to install the notebook of current application to specified location.</p>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">usage</span><span class="p">:</span> <span class="n">smartcam</span><span class="o">-</span><span class="n">install</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span> <span class="n">DIR</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span><span class="p">]</span>

    <span class="n">Script</span> <span class="n">to</span> <span class="n">copy</span> <span class="n">smartcam</span> <span class="n">Jupyter</span> <span class="n">notebook</span> <span class="n">to</span> <span class="n">user</span> <span class="n">directory</span>

    <span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
      <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>         <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
      <span class="o">-</span><span class="n">d</span> <span class="n">DIR</span><span class="p">,</span> <span class="o">--</span><span class="nb">dir</span> <span class="n">DIR</span>  <span class="n">Install</span> <span class="n">the</span> <span class="n">Jupyter</span> <span class="n">notebook</span> <span class="n">to</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">directory</span><span class="o">.</span>
      <span class="o">-</span><span class="n">f</span><span class="p">,</span> <span class="o">--</span><span class="n">force</span>        <span class="n">Force</span> <span class="n">to</span> <span class="n">install</span> <span class="n">the</span> <span class="n">Jupyter</span> <span class="n">notebook</span> <span class="n">even</span> <span class="k">if</span> <span class="n">the</span> <span class="n">destination</span> <span class="n">directory</span> <span class="n">exists</span><span class="o">.</span>
</pre></div>
</div>
<ul>
<li><p>Please get the list of running Jupyter servers with command <strong>as user <code class="docutils literal notranslate"><span class="pre">petalinux</span></code></strong>:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">jupyter-server</span> <span class="pre">list</span> </code></p>
<p>Output example:</p>
<blockquote>
<div><p>Currently running servers:</p>
<p><code class="docutils literal notranslate"><span class="pre">http://ip:port/?token=xxxxxxxxxxxxxxxxxx</span></code>  :: /home/petalinux/notebooks</p>
</div></blockquote>
</li>
<li><p>Stop the currently running server with command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">jupyter-server</span> <span class="pre">stop</span> <span class="pre">8888</span> </code></p>
</li>
<li><p>To launch Jupyter notebook on the target, run below command.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>    python3 /usr/bin/jupyter-lab --no-browser --notebook-dir<span class="o">=</span>/home/petalinux/notebooks --ip<span class="o">=</span>ip-address <span class="p">&amp;</span> 

    // fill <span class="k">in</span> ip-address from ifconfig 
</pre></div>
</div>
<p>Output example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.141 LabApp<span class="o">]</span> JupyterLab extension loaded from /usr/lib/python3.8/site-packages/jupyterlab
<span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.141 LabApp<span class="o">]</span> JupyterLab application directory is /usr/share/jupyter/lab
<span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.164 ServerApp<span class="o">]</span> jupyterlab <span class="p">|</span> extension was successfully loaded.
<span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.166 ServerApp<span class="o">]</span> Serving notebooks from <span class="nb">local</span> directory: /home/petalinux/notebooks
<span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.166 ServerApp<span class="o">]</span> Jupyter Server <span class="m">1</span>.2.1 is running at:
<span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.166 ServerApp<span class="o">]</span> http://192.168.3.123:8888/lab?token<span class="o">=</span>9f7a9cd1477e8f8226d62bc026c85df23868a1d9860eb5d5
<span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.166 ServerApp<span class="o">]</span>  or http://127.0.0.1:8888/lab?token<span class="o">=</span>9f7a9cd1477e8f8226d62bc026c85df23868a1d9860eb5d5
<span class="o">[</span>I <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.167 ServerApp<span class="o">]</span> Use Control-C to stop this server and shut down all kernels <span class="o">(</span>twice to skip confirmation<span class="o">)</span>.
<span class="o">[</span>C <span class="m">2021</span>-08-02 <span class="m">15</span>:54:31.186 ServerApp<span class="o">]</span>

    To access the server, open this file <span class="k">in</span> a browser:
        file:///home/petalinux/.local/share/jupyter/runtime/jpserver-1119-open.html
    Or copy and paste one of these URLs:
        http://192.168.3.123:8888/lab?token<span class="o">=</span>9f7a9cd1477e8f8226d62bc026c85df23868a1d9860eb5d5
     or http://127.0.0.1:8888/lab?token<span class="o">=</span>9f7a9cd1477e8f8226d62bc026c85df23868a1d9860eb5d5
</pre></div>
</div>
<ul>
<li><p>User can access the server by opening the server URL from previous steps with the Chrome browser.</p>
<p>In the notebook, we will construct the GStreamer pipeline string, you can get it by adding simple python code to print it out, and played with gst-launch-1.0 command in the console, and there are some user options variables that can be changed and run with. For other parts of the pipeline, you can also change and play to see the effect easily.</p>
</li>
</ul>
</div>
<div class="section" id="command-line">
<h3>Command line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h3>
<p>These allow the user to define different video input and output device targets using the “smartcam” application. These are to be executed using the UART/debug interface.</p>
<p><strong>Notice</strong> The application need to be ran with <em><strong>sudo</strong></em> .</p>
<div class="section" id="example-scripts">
<h4>Example scripts<a class="headerlink" href="#example-scripts" title="Permalink to this headline">¶</a></h4>
<p>Example scripts and options definitions are provided below.</p>
<p>Refer to <a class="reference external" href="#script-loc">File Structure</a> to find the files location.</p>
<details>
<summary><b>Click here to view the example script usage</b></summary><ul class="simple">
<li><p>MIPI RTSP server:</p>
<ol class="simple">
<li><p>Invoking <code class="docutils literal notranslate"><span class="pre">&quot;sudo</span> <span class="pre">01.mipi-rtsp.sh&quot;</span></code> will start rtsp server for mipi captured images.</p></li>
<li><p>Script accepts ${width} ${height} as the 1st and 2nd parameter, the default is 1920 x 1080.</p></li>
<li><p>Running the script will give message in the form:</p></li>
</ol>
</li>
</ul>
<blockquote>
<div><p>stream ready at:</p>
<p>rtsp://boardip:port/test</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">Run</span> <span class="s2">&quot;ffplay rtsp://boardip:port/test&quot;</span> <span class="n">on</span> <span class="n">the</span> <span class="n">client</span> <span class="n">PC</span> <span class="n">to</span> <span class="n">receive</span> <span class="n">the</span> <span class="n">rtsp</span> <span class="n">stream</span><span class="o">.</span>

<span class="mf">4.</span> <span class="n">Checking</span><span class="p">:</span>

  <span class="n">You</span> <span class="n">should</span> <span class="n">be</span> <span class="n">able</span> <span class="n">to</span> <span class="n">see</span> <span class="n">the</span> <span class="n">images</span> <span class="n">the</span> <span class="n">camera</span> <span class="ow">is</span> <span class="n">capturing</span> <span class="n">on</span> <span class="n">the</span> <span class="n">ffplay</span> <span class="n">window</span><span class="p">,</span> <span class="ow">and</span> <span class="n">when</span> <span class="n">there</span><span class="s1">&#39;s face captured by camera, there should be blue box drawn around the face, and the box should follow the movement of the face.</span>
</pre></div>
</div>
<ul>
<li><p>MIPI DP display:</p>
<ol>
<li><p>Make sure the monitor is connected as <a class="reference external" href="#Setting-up-the-Board">here</a>.</p></li>
<li><p>Invoking <code class="docutils literal notranslate"><span class="pre">&quot;sudo</span> <span class="pre">02.mipi-dp.sh&quot;</span></code> will play the captured video with detection results on monitor.</p></li>
<li><p>Script accepts ${width} ${height} as the 1st and 2nd parameter, the default is 1920 x 1080.</p></li>
<li><p>Checking:</p>
<p>You should be able to see the images the camera is capturing on the monitor connected to the board, and when there’s face captured by the camera, there should be blue box drawn around the face, and the box should follow the movement of the face.</p>
</li>
</ol>
</li>
<li><p>File to File</p>
<ol>
<li><p>Invoking <code class="docutils literal notranslate"><span class="pre">&quot;sudo</span> <span class="pre">03.file-file.sh&quot;</span></code></p>
<p>Take the first argument passed to this script as the path to the H264 video file (you can use the demo video for face detection, or similar videos), perform face detection and generate video with detection bbox, save as <code class="docutils literal notranslate"><span class="pre">./out.h264</span></code></p>
</li>
<li><p>Checking:</p>
<p>Play the input video file and generated video file “./out.h264” with any media player you prefer, e.g. VLC, FFPlay. You should be able to see in the output video file, there are blue boxes around the faces of people, and the boxes should follow the movement of the faces, while there’re no such boxes with the input video file.</p>
</li>
</ol>
</li>
<li><p>File to DP</p>
<ol>
<li><p>Invoking <code class="docutils literal notranslate"><span class="pre">&quot;sudo</span> <span class="pre">04.file-ssd-dp.sh&quot;</span></code></p>
<p>Take the first argument passed to this script as the path to the H264 video file (you can use the demo video for ADAS SSD, or similar videos), perform vehicles detection and generate video with detection bbox, and display onto monitor</p>
</li>
<li><p>Checking:</p>
<p>You should be able to see a video of highway driving, with the detection of vehicles in a bounding box.</p>
</li>
</ol>
</li>
</ul>
</details></div>
<div class="section" id="additional-configuration-options-for-smartcam-invocation">
<h4>Additional configuration options for <code class="docutils literal notranslate"><span class="pre">smartcam</span></code> invocation<a class="headerlink" href="#additional-configuration-options-for-smartcam-invocation" title="Permalink to this headline">¶</a></h4>
<p>The example scripts and Jupyter notebook work as examples to show the capability of the smartcam for specific configurations. More combinations could be made based on the options provided by smartcam. User can get detailed application options as following by invoking <code class="docutils literal notranslate"><span class="pre">smartcam</span> <span class="pre">--help</span></code>.</p>
<div class="section" id="usage">
<h5>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> smartcam [OPTION?] - Application for face detection on SOM board of Xilinx.

 Help Options:

 -h, --help             Show help options

 --help-all             Show all help options

 --help-gst             Show GStreamer Options


 Application Options:

 -m, --mipi=                use MIPI camera as input source, auto detect, fail if no mipi available.

 -u, --usb=media_ID         usb camera video device id, e.g. 2 for /dev/video2

 -f, --file=file            path location of h26x file as input

 -i, --infile-type=h264     input file type: [h264 | h265]

 -W, --width=1920           resolution w of the input

 -H, --height=1080          resolution h of the input

 -r, --framerate=30         framerate of the input

 -t, --target=dp            [dp|rtsp|file]

 -o, --outmedia-type=h264   output file type: [h264 | h265]

 -p, --port=5000            Port to listen on (default: 5000)

 -a, --aitask               select AI task to be run: [facedetect|ssd|refinedet]

 -n, --nodet                no AI inference

 -A, --audio                RTSP with I2S audio input

 -R, --report               report fps

 -s, --screenfps            display fps on screen, notic this will cause perfermance degradation.

 --ROI-off                  turn off ROI (Region-of-Interest)

--control-rate=low-latency  Encoder parameter control-rate
                            Supported value:
                            ((0): disable (1): variable (2): constant
                            (2130706434): capped-variable
                            (2130706433): low-latency)

--target-bitrate=3000       Encoder parameter target-bitrate

--gop-length=60             Encoder parameter gop-length

--profile                   Encoder parameter profile.
                            Default: h264: constrained-baseline; h264: main
                            Supported value:
                            (H264: constrained-baseline, baseline, main, high, high-10, high-4:2:2, high-10-intra, high-4:2:2-intra
                             H265: main, main-intra, main-10, main-10-intra, main-422-10, main-422-10-intra)

--level                     Encoder parameter level
                            Default: 4
                            Supported value:
                            (4, 4.1, 5, 5.1, 5.2)

--tier                      Encoder parameter tier
                            Default: main
                            Supported value:
                            (main, high)

--encodeEnhancedParam       String for fully customizing the encoder in the form &quot;param1=val1, param2=val2,...&quot;, where paramn is the name of the encoder parameter
                            For detailed info about the parameter name and value range, just run gst-inspect-1.0 omxh264enc / gst-inspect-1.0 omxh265enc based on encoding type selected by option &quot;--outmedia-type&quot;, the parameter could be any of the listed parameters except &quot;control-rate, target-bitrate, gop-length&quot; which have dedicated options as above.
</pre></div>
</div>
</div>
<div class="section" id="examples-of-supported-combinations-sorted-by-input-are-outlined-below">
<h5>Examples of supported combinations sorted by input are outlined below<a class="headerlink" href="#examples-of-supported-combinations-sorted-by-input-are-outlined-below" title="Permalink to this headline">¶</a></h5>
<p>If using the command line to invoke the smartcam, stop the process via CTRL-C prior to starting the next instance.</p>
<ul>
<li><p>MIPI Input (IAS sensor input):</p>
<ul>
<li><p>output: RTSP</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">smartcam</span> <span class="o">--</span><span class="n">mipi</span> <span class="o">-</span><span class="n">W</span> <span class="mi">1920</span> <span class="o">-</span><span class="n">H</span> <span class="mi">1080</span> <span class="o">--</span><span class="n">target</span> <span class="n">rtsp</span>
</pre></div>
</div>
</li>
<li><p>output: RTSP with audio <a name="rtsp-audio"> </a></p>
<p>sudo smartcam –mipi -W 1920 -H 1080 –target rtsp –audio</p>
</li>
<li><p>output: DP</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">smartcam</span> <span class="o">--</span><span class="n">mipi</span> <span class="o">-</span><span class="n">W</span> <span class="mi">1920</span> <span class="o">-</span><span class="n">H</span> <span class="mi">1080</span> <span class="o">--</span><span class="n">target</span> <span class="n">dp</span>
</pre></div>
</div>
</li>
<li><p>output: file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">smartcam</span> <span class="o">--</span><span class="n">mipi</span> <span class="o">-</span><span class="n">W</span> <span class="mi">1920</span> <span class="o">-</span><span class="n">H</span> <span class="mi">1080</span> <span class="o">--</span><span class="n">target</span> <span class="n">file</span>
</pre></div>
</div>
<p><strong>Note</strong> Output file is “./out.h264”</p>
</li>
</ul>
</li>
<li><p>input file (file on file system):</p>
<p><strong>Note</strong> You must update the command to the specific file desired as the input source.</p>
<ul>
<li><p>output: RTSP</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">smartcam</span> <span class="o">--</span><span class="n">file</span> <span class="o">./</span><span class="n">test</span><span class="o">.</span><span class="n">h264</span> <span class="o">-</span><span class="n">i</span> <span class="n">h264</span> <span class="o">-</span><span class="n">W</span> <span class="mi">1920</span> <span class="o">-</span><span class="n">H</span> <span class="mi">1080</span> <span class="o">-</span><span class="n">r</span> <span class="mi">30</span> <span class="o">--</span><span class="n">target</span> <span class="n">rtsp</span>
</pre></div>
</div>
</li>
<li><p>output: DP</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">smartcam</span> <span class="o">--</span><span class="n">file</span> <span class="o">./</span><span class="n">test</span><span class="o">.</span><span class="n">h264</span> <span class="o">-</span><span class="n">i</span> <span class="n">h264</span> <span class="o">-</span><span class="n">W</span> <span class="mi">1920</span> <span class="o">-</span><span class="n">H</span> <span class="mi">1080</span> <span class="o">-</span><span class="n">r</span> <span class="mi">30</span> <span class="o">--</span><span class="n">target</span> <span class="n">dp</span>
</pre></div>
</div>
</li>
<li><p>output: file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">smartcam</span> <span class="o">--</span><span class="n">file</span> <span class="o">./</span><span class="n">test</span><span class="o">.</span><span class="n">h264</span> <span class="o">-</span><span class="n">i</span> <span class="n">h264</span> <span class="o">-</span><span class="n">W</span> <span class="mi">1920</span> <span class="o">-</span><span class="n">H</span> <span class="mi">1080</span> <span class="o">-</span><span class="n">r</span> <span class="mi">30</span> <span class="o">--</span><span class="n">target</span> <span class="n">file</span>
</pre></div>
</div>
<p><strong>Note</strong> Output file is “./out.h264”</p>
</li>
</ul>
</li>
<li><p>input USB (USB webcam):</p>
<p><strong>Note</strong> You must ensure the width/height/framerate defined are supported by your USB camera.</p>
<ul>
<li><p>output: RTSP</p>
<p>sudo smartcam –usb 1 -W 1920 -H 1080 -r 30 –target rtsp</p>
</li>
<li><p>output: DP</p>
<p>sudo smartcam –usb 1 -W 1920 -H 1080 -r 30 –target dp</p>
</li>
<li><p>output: file</p>
<p>sudo smartcam –usb 1 -W 1920 -H 1080 -r 30 –target file</p>
<p><strong>Note</strong> Output file is “./out.h264”</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="files-structure-of-the-application">
<h2>Files structure of the application<a class="headerlink" href="#files-structure-of-the-application" title="Permalink to this headline">¶</a></h2>
<p>The application is installed as:</p>
<ul class="simple">
<li><p>Binary File Directory: /opt/xilinx/bin</p></li>
</ul>
<table border="1" class="docutils">
<thead>
<tr>
<th>filename</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>smartcam</td>
<td>main app</td>
</tr>
</tbody>
</table><ul class="simple">
<li><p>Script File Directory: /opt/xilinx/bin/ <a name="script-loc"></a></p></li>
</ul>
<table border="1" class="docutils">
<thead>
<tr>
<th>filename</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>01.mipi-rtsp.sh</td>
<td>call smartcam to run facedetction and send out rtsp stream.</td>
</tr>
<tr>
<td>02.mipi-dp.sh</td>
<td>call smartcam to run facedetction and display on DP display.</td>
</tr>
<tr>
<td>03.file-file.sh</td>
<td>call smartcam to run facedetction and display on input h264/5 file and generate output h264/5 with detection boxes.</td>
</tr>
</tbody>
</table><ul>
<li><p>Configuration File Directory: /opt/xilinx/share/ivas/smartcam/${AITASK}</p>
<p>AITASK = “facedetect” | “refinedet” | “ssd”</p>
</li>
</ul>
<table border="1" class="docutils">
<thead>
<tr>
<th>filename</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>preprocess.json</td>
<td>Config of preprocess for AI inference</td>
</tr>
<tr>
<td>aiinference.json</td>
<td>Config of AI inference (facedetect|refinedet|ssd)</td>
</tr>
<tr>
<td>drawresult.json</td>
<td>Config of boundbox drawing</td>
</tr>
</tbody>
</table><ul class="simple">
<li><p>Jupyter notebook file: =&gt; /opt/xilinx/share/notebooks/smartcam</p></li>
</ul>
<table border="1" class="docutils">
<thead>
<tr>
<th>filename</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>smartcam.ipynb</td>
<td>Jupyter notebook file for MIPI/USB --&gt; DP/RTSP demo.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Go back to the <a class="reference internal" href="../smartcamera_landing.html"><span class="doc">KV260 SOM Smart camera design start page</span></a></p></li>
</ul>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2021 Xilinx</p></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="customize_ai_models.html" class="btn btn-neutral float-right" title="Customizing the AI Models used in the application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="Design Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on September 21, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>