<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Setting up the Board and Application Deployment &mdash; Kria™ KR260 2022.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="BIST Overview" href="overview.html" />
    <link rel="prev" title="BIST" href="../bist_landing.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Kria™ KR260
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/dfx.html">Dynamic Function eXchange</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ipmi_eeprom.html">IPMI EEPROM Design Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/yocto.html">Yocto Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/xen.html">XEN Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KR260 Applications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../10gige_vision_camera/10gige_vision_camera_landing.html">10GigE Vision Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ros2_multinode_communication_via_tsn/ros2_multinode_communication_via_tsn_landing.html">ROS 2 Multi-Node Communications via TSN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ros2_perception_node/ros2_perception_node_landing.html">ROS 2 Perception Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gps_1588_ptp/gps_1588_ptp_precision_time_mgmt.html">Precision Time Management</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../bist_landing.html">Built-In Self Test (BIST)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../bist_landing.html#quick-start">Quick Start</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Install and Run BIST</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-up-the-host-machine">Set up the Host Machine</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-up-the-board">Set up the Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-ssh-with-x-forwarding">Setup SSH with X-forwarding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-linux">Boot Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#download-and-load-the-bist-pl-firmware">Download and Load the BIST PL Firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous-preparation">Miscellaneous Preparation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#download-and-run-the-bist-docker-image">Download and Run the BIST Docker Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-the-bist-application">Run the BIST Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bist_landing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bist_landing.html#other">Other</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Kria™ KR260</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../bist_landing.html">BIST</a> &raquo;</li>
      <li>Setting up the Board and Application Deployment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/bist/docs/run.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="setting-up-the-board-and-application-deployment">
<h1>Setting up the Board and Application Deployment<a class="headerlink" href="#setting-up-the-board-and-application-deployment" title="Permalink to this heading">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This document shows how to set up the board and run the Built-In Self Test
(BIST) application.</p>
<p>This guide and its prebuilts are targeted for Ubuntu 22.04 and Xilinx 2022.2
toolchain.</p>
</div>
<div class="section" id="set-up-the-host-machine">
<h2>Set up the Host Machine<a class="headerlink" href="#set-up-the-host-machine" title="Permalink to this heading">¶</a></h2>
<p><strong>Note:</strong> Setting up the host machine is only required for testing the ethernet
and SFP+ interfaces. If this is skipped, the tests for these interfaces will
fail.</p>
<ul>
<li><p>Install the NIC card into the host machine</p></li>
<li><p>Configure the host machine to have a static IP of 192.168.0.1 (If a different
IP is used, the <code class="docutils literal notranslate"><span class="pre">BIST_REMOTE_HOST_IP</span></code> environment variable needs to be set on
the Kria board to override the default host IP)</p></li>
<li><p>Install iperf3</p>
<ul>
<li><p>For Ubuntu, use the command below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">iperf3</span>
</pre></div>
</div>
</li>
<li><p>For Windows, use the appropriate download link from
<a class="reference external" href="https://iperf.fr/iperf-download.php">this page</a></p></li>
</ul>
</li>
<li><p>Start an iperf3 server on the host machine using the command below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5201</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="set-up-the-board">
<h2>Set up the Board<a class="headerlink" href="#set-up-the-board" title="Permalink to this heading">¶</a></h2>
<p>Supported Starter Kits</p>
<p>The BIST application requires the following hardware setup for running
the full suite of hardware tests, see board specific pages:</p>
<ol class="simple">
<li><p><a class="reference internal" href="setup_kv260.html"><span class="doc">KV260 Board Setup</span></a></p></li>
<li><p><a class="reference internal" href="setup_kr260.html"><span class="doc">KR260 Board Setup</span></a></p></li>
</ol>
</div>
<div class="section" id="setup-ssh-with-x-forwarding">
<h2>Setup SSH with X-forwarding<a class="headerlink" href="#setup-ssh-with-x-forwarding" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>To run the bist test suite test instructions should be running over an SSH
connection with X-forwarding enabled</p>
<p>Examples:</p>
<ul>
<li><p>On Linux, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -X &lt;hostname&gt;
</pre></div>
</div>
</li>
<li><p>On Windows download <a class="reference external" href="https://mobaxterm.mobatek.net/download.html">Mobaxterm</a>
which automatically enables X-forwarding when creating a new ssh connection</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="boot-linux">
<h2>Boot Linux<a class="headerlink" href="#boot-linux" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Testing was performed with:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://people.canonical.com/~platform/images/xilinx/kria-ubuntu-22.04/iot-limerick-kria-classic-desktop-2204-x07-20230302-63.img.xz?_ga=2.229092828.1548870927.1684017553-434607567.1663082500">x07-20230302-63 Ubuntu 22.04 Linux Image</a></p></li>
<li><p><a class="reference external" href="https://www.xilinx.com/member/forms/download/xef.html?filename=BOOT_xilinx-k26-starterkit-v2022.1-09152304_update3.BIN">v2022.1-09152304_update3 Boot Firmware</a></p></li>
</ul>
</li>
<li><p>Before continuing with the BIST application specific instructions, if not yet
done so, boot Linux with instructions from the
<a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260/2022.1/build/html/docs/kria_starterkit_linux_boot.html">Kria Starter Kit Linux Boot</a></p>
<p><strong>Note:</strong> The minimum Linux kernel version required is <code class="docutils literal notranslate"><span class="pre">5.15.0.1022.26</span></code></p>
</li>
</ul>
</div>
<div class="section" id="download-and-load-the-bist-pl-firmware">
<h2>Download and Load the BIST PL Firmware<a class="headerlink" href="#download-and-load-the-bist-pl-firmware" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Search the package feed for available bist firmware packages</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt search bist

Sorting... Done
Full Text Search... Done

xlnx-firmware-kr260-bist/jammy <span class="m">0</span>.9-0xlnx1 arm64
FPGA firmware <span class="k">for</span> Xilinx boards - kr260 bist application
xlnx-firmware-kv260-bist/jammy <span class="m">0</span>.9-0xlnx1 arm64
FPGA firmware <span class="k">for</span> Xilinx boards - kv260 bist application
</pre></div>
</div>
</li>
<li><p>Install firmware binaries</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install xlnx-firmware-kv260-bist     // For kv260-bist
sudo apt install xlnx-firmware-kr260-bist     // For kr260-bist
</pre></div>
</div>
</li>
<li><p>List installed the application firmware binaries</p>
<p>The firmware consist of bitstream, device tree overlay (dtbo) file. The
firmware is loaded dynamically on user request once Linux is fully booted.
The xmutil utility can be used for that purpose.</p>
<p>After installing the FW, execute xmutil listapps to verify that it is
captured under the listapps function, and to have dfx-mgrd re-scan and
register all accelerators in the FW directory tree.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xmutil listapps
</pre></div>
</div>
</li>
<li><p>Load a new application firmware binary</p>
<p>When there’s already another accelerator/firmware being activated, unload it
first, then load the desired BIST firmware</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xmutil unloadapp
sudo xmutil loadapp kv260-bist      // For kv260-bist
sudo xmutil loadapp kr260-bist      // For kr260-bist
</pre></div>
</div>
</li>
<li><p>Dynamically load AR1335 kernel module (only for KV260)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo modprobe ar1335
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="miscellaneous-preparation">
<h2>Miscellaneous Preparation<a class="headerlink" href="#miscellaneous-preparation" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Verify if SSH terminal is using the correct authority file</p>
<ul class="simple">
<li><p>The output should look something like this</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xauth -v list
Using authority file /home/ubuntu/.Xauthority
kria/unix:10  MIT-MAGIC-COOKIE-1  f5212118305f75678a69daa4a6eda703
</pre></div>
</div>
<ul class="simple">
<li><p>If incorrect or no authority file present, do the following steps:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf ~/.Xaut*
</pre></div>
</div>
<ul class="simple">
<li><p>Reboot the target board</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo reboot
</pre></div>
</div>
<ul class="simple">
<li><p>Check the <code class="docutils literal notranslate"><span class="pre">xauth</span> <span class="pre">-v</span> <span class="pre">list</span></code> after reboot(in SSH terminal), it should display
the correct authority file on output console</p></li>
</ul>
</li>
<li><p>The BIST application tests the fan, therefore please stop the fancontrol
service before running the docker for the testing to function as intended</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop fancontrol
</pre></div>
</div>
</li>
<li><p>Disable desktop environment before running the docker for the display testing
to function as intended</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xmutil desktop_disable
</pre></div>
</div>
<p><strong>NOTE</strong>: Executing “xmutil desktop_disable” will cause the monitor to go
blank.</p>
</li>
<li><p>Remember to start the fancontrol service after exiting the docker container</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl start fancontrol
</pre></div>
</div>
</li>
<li><p>After running the application and exiting the docker container, the desktop
environment can be enabled again</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xmutil desktop_enable
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="download-and-run-the-bist-docker-image">
<h2>Download and Run the BIST Docker Image<a class="headerlink" href="#download-and-run-the-bist-docker-image" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Pull the docker image from dockerhub</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker pull xilinx/kria-bist:2022.2
</pre></div>
</div>
</li>
<li><p>The storage volume on the SD card can be limited with multiple docker
images inbstalled. If there are space issues, you can use following command
to remove existing docker images.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker rmi --force &lt;image&gt;
</pre></div>
</div>
</li>
<li><p>You can find the images installed with command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker images
</pre></div>
</div>
</li>
<li><p>Launch the docker container using the below command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run <span class="se">\</span>
    --env<span class="o">=</span>DISPLAY <span class="se">\</span>
    --env<span class="o">=</span>XDG_SESSION_TYPE <span class="se">\</span>
    --net<span class="o">=</span>host <span class="se">\</span>
    --privileged <span class="se">\</span>
    --volume<span class="o">=</span>/home/ubuntu/.Xauthority:/root/.Xauthority:rw <span class="se">\</span>
    -v /tmp:/tmp <span class="se">\</span>
    -v /dev:/dev <span class="se">\</span>
    -v /sys:/sys <span class="se">\</span>
    -v /etc/vart.conf:/etc/vart.conf <span class="se">\</span>
    -v /lib/firmware/xilinx:/lib/firmware/xilinx <span class="se">\</span>
    -v /run:/run <span class="se">\</span>
    -it xilinx/kria-bist:2022.2 bash
</pre></div>
</div>
</li>
<li><p>It will launch the bist image in a new container and drop the user into a bash
shell</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@xlnx</span><span class="o">-</span><span class="n">docker</span><span class="o">/</span><span class="c1">#</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="run-the-bist-application">
<h2>Run the BIST Application<a class="headerlink" href="#run-the-bist-application" title="Permalink to this heading">¶</a></h2>
<p>The application is installed under <code class="docutils literal notranslate"><span class="pre">/opt/xilinx/kria-bist</span></code>. Navigate to the
“tests” directory from where the BIST tests are to be run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt/xilinx/kria-bist/tests
</pre></div>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h3>
<p>Commonly used command line switches for BIST</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest-3 <span class="o">[</span>OPTIONS<span class="o">]</span>

OPTIONS:
  --collect-only                Collect the tests
  --board &lt;target_board&gt;        Specify target board
  -k &lt;test_name&gt;                Run an individual <span class="nb">test</span>
  -m &lt;module_name&gt;              Specify module name
</pre></div>
</div>
</div>
<div class="section" id="output-and-logs">
<h3>Output and Logs<a class="headerlink" href="#output-and-logs" title="Permalink to this heading">¶</a></h3>
<p>The pytest command line output will have two separate sessions as follows</p>
<ul>
<li><p>Test session</p>
<p>It will display number of collected, deselected and selected tests. Current
running test will also be shown.</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">=============================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">==============================</span>
platform linux -- Python <span class="m">3</span>.10.6, pytest-6.2.5, py-1.10.0, pluggy-0.13.0
rootdir: /opt/xilinx/kria-bist/tests, configfile: pytest.ini
plugins: anyio-3.6.1
collected <span class="m">34</span> items / <span class="m">33</span> deselected / <span class="m">1</span> selected

gpio/test_bist_gpio.py::test_gpio<span class="o">[</span>pmod0<span class="o">]</span>
</pre></div>
</div>
</li>
<li><p>Live Log call</p>
<p>This displays the current status of the test.</p>
<ol class="simple">
<li><p>Start of test: Indicates test has started.</p></li>
<li><p>Test observations: Prints the test observation on the command line.</p></li>
<li><p>Test passed/failed: Declares the test result ie passed/failed.</p></li>
<li><p>End of Test: Indicates that the test has ended.</p></li>
</ol>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Write pattern: <span class="m">0001</span>, Read pattern <span class="m">0001</span> : Match
Write pattern: <span class="m">0010</span>, Read pattern <span class="m">0010</span> : Match
Write pattern: <span class="m">0100</span>, Read pattern <span class="m">0100</span> : Match
Write pattern: <span class="m">1000</span>, Read pattern <span class="m">1000</span> : Match
Test passed
End of <span class="nb">test</span>
PASSED                                                                   <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">=======================</span> <span class="m">1</span> passed, <span class="m">33</span> deselected <span class="k">in</span> <span class="m">1</span>.02s <span class="o">=======================</span>
</pre></div>
</div>
</li>
<li><p>A log file (<code class="docutils literal notranslate"><span class="pre">kria_bist_pytest.log</span></code>) will be created in the current directory.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Run the entire BIST test suite for a target board</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest-3 --board kv260     // For KV260
pytest-3 --board kr260     // For KR260
</pre></div>
</div>
</li>
<li><p>Run individual tests</p>
<p>The example below will run the pmod0 test on the KV260 as target board</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest-3 -k pmod0 --board <span class="nv">kv260</span>

<span class="o">=============================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">==============================</span>
platform linux -- Python <span class="m">3</span>.10.6, pytest-6.2.5, py-1.10.0, pluggy-0.13.0
rootdir: /opt/xilinx/kria-bist/tests, configfile: pytest.ini
plugins: anyio-3.6.1
collected <span class="m">34</span> items / <span class="m">33</span> deselected / <span class="m">1</span> selected

gpio/test_bist_gpio.py::test_gpio<span class="o">[</span>pmod0<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Write pattern: <span class="m">0001</span>, Read pattern <span class="m">0001</span> : Match
Write pattern: <span class="m">0010</span>, Read pattern <span class="m">0010</span> : Match
Write pattern: <span class="m">0100</span>, Read pattern <span class="m">0100</span> : Match
Write pattern: <span class="m">1000</span>, Read pattern <span class="m">1000</span> : Match
Test passed
End of <span class="nb">test</span>
PASSED                                                                   <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">=======================</span> <span class="m">1</span> passed, <span class="m">33</span> deselected <span class="k">in</span> <span class="m">1</span>.01s <span class="o">=======================</span>
</pre></div>
</div>
</li>
<li><p>Collect test cases</p>
<p>Collect all the tests for a target board</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest-3 --collect-only --board <span class="nv">kv260</span>

<span class="o">==========================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">===============================</span>
platform linux -- Python <span class="m">3</span>.10.6, pytest-6.2.5, py-1.10.0, pluggy-0.13.0
rootdir: /opt/xilinx/kria-bist/tests, configfile: pytest.ini
plugins: anyio-3.6.1
collected <span class="m">40</span> items

&lt;Module disk/test_bist_disk.py&gt;
  &lt;Function test_disk<span class="o">[</span>usb1_read_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>usb1_write_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>usb2_read_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>usb2_write_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>usb3_read_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>usb3_write_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>usb4_read_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>usb4_write_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>sd_read_performance<span class="o">]</span>&gt;
  &lt;Function test_disk<span class="o">[</span>sd_write_performance<span class="o">]</span>&gt;
&lt;Module display/test_bist_display.py&gt;
  &lt;Function test_display<span class="o">[</span>display_connectivity<span class="o">]</span>&gt;
  &lt;Function test_display<span class="o">[</span>display_modetest<span class="o">]</span>&gt;
&lt;Module eeprom/test_bist_eeprom.py&gt;
  &lt;Function test_eeprom<span class="o">[</span>som_eeprom<span class="o">]</span>&gt;
  &lt;Function test_eeprom<span class="o">[</span>carrier_card_eeprom<span class="o">]</span>&gt;
&lt;Module eth/test_bist_eth.py&gt;
  &lt;Function test_eth<span class="o">[</span>ethernet1_ping<span class="o">]</span>&gt;
  &lt;Function test_eth<span class="o">[</span>ethernet1_perf<span class="o">]</span>&gt;
&lt;Module gpio/test_bist_gpio.py&gt;
  &lt;Function test_gpio<span class="o">[</span>pmod0<span class="o">]</span>&gt;
&lt;Module i2c/test_bist_i2c.py&gt;
  &lt;Function test_i2c<span class="o">[</span>ps_i2c_bus_main<span class="o">]</span>&gt;
  &lt;Function test_i2c<span class="o">[</span>axi_i2c_bus_main<span class="o">]</span>&gt;
  &lt;Function test_i2c<span class="o">[</span>axi_i2c_bus_ch0<span class="o">]</span>&gt;
&lt;Module iio/test_bist_iio.py&gt;
  &lt;Function test_iio<span class="o">[</span>ina260_current<span class="o">]</span>&gt;
&lt;Module mtd/test_bist_mtd.py&gt;
  &lt;Function test_mtd<span class="o">[</span>qspi_read_write<span class="o">]</span>&gt;
  &lt;Function test_mtd<span class="o">[</span>qspi_read_performance<span class="o">]</span>&gt;
  &lt;Function test_mtd<span class="o">[</span>qspi_write_performance<span class="o">]</span>&gt;
&lt;Module pwm/test_bist_pwm.py&gt;
  &lt;Function test_pwm<span class="o">[</span>fan<span class="o">]</span>&gt;
&lt;Module tpm/test_bist_tpm.py&gt;
  &lt;Function test_tpm<span class="o">[</span>tpm2_getcap<span class="o">]</span>&gt;
  &lt;Function test_tpm<span class="o">[</span>tpm2_selftest<span class="o">]</span>&gt;
  &lt;Function test_tpm<span class="o">[</span>tpm2_getrandom<span class="o">]</span>&gt;
  &lt;Function test_tpm<span class="o">[</span>tpm2_hash<span class="o">]</span>&gt;
  &lt;Function test_tpm<span class="o">[</span>tpm2_pcrread<span class="o">]</span>&gt;
  &lt;Function test_tpm<span class="o">[</span>tpm2_pcrextend<span class="o">]</span>&gt;
  &lt;Function test_tpm<span class="o">[</span>tpm2_pcrreset<span class="o">]</span>&gt;
&lt;Module video/test_bist_video.py&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_ap1302_ximagesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_ap1302_perf<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>tpg_ap1302_ximagesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>tpg_ap1302_perf<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>imx219_filesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>imx219_perf<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_filesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_perf<span class="o">]</span>&gt;

<span class="o">======================</span> <span class="m">40</span> tests collected <span class="k">in</span> <span class="m">1</span>.02s <span class="o">===========================</span>
</pre></div>
</div>
</li>
<li><p>Collect all tests for a specific testmodule for a target board</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest-3 --collect-only --board kv260 -m <span class="nv">video</span>

<span class="o">=============================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">==============================</span>
platform linux -- Python <span class="m">3</span>.10.6, pytest-6.2.5, py-1.10.0, pluggy-0.13.0
rootdir: /opt/xilinx/kria-bist/tests, configfile: pytest.ini
plugins: anyio-3.6.1
collected <span class="m">34</span> items / <span class="m">26</span> deselected / <span class="m">8</span> selected

&lt;Module video/test_bist_video.py&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_ap1302_ximagesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_ap1302_perf<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>tpg_ap1302_ximagesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>tpg_ap1302_perf<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>imx219_filesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>imx219_perf<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_filesink<span class="o">]</span>&gt;
  &lt;Function test_video<span class="o">[</span>ar1335_perf<span class="o">]</span>&gt;

<span class="o">================</span> <span class="m">8</span>/34 tests collected <span class="o">(</span><span class="m">26</span> deselected<span class="o">)</span> <span class="k">in</span> <span class="m">0</span>.99s <span class="o">=================</span>
</pre></div>
</div>
</li>
<li><p>Run all tests for a target board and module</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest-3 --board kv260 -m <span class="nv">video</span>

<span class="o">=============================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">==============================</span>
platform linux -- Python <span class="m">3</span>.10.6, pytest-6.2.5, py-1.10.0, pluggy-0.13.0
rootdir: /opt/xilinx/kria-bist/tests, configfile: pytest.ini
plugins: anyio-3.6.1
collected <span class="m">34</span> items / <span class="m">26</span> deselected / <span class="m">8</span> selected

video/test_bist_video.py::test_video<span class="o">[</span>ar1335_ap1302_ximagesink<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Please observe the pop-up window
Do you see color bar <span class="nb">test</span> pattern <span class="k">in</span> the window <span class="o">[</span>Y/N<span class="o">]</span>?
y
User reports that pattern was observed <span class="k">in</span> the window
Test passed
End of <span class="nb">test</span>
PASSED
video/test_bist_video.py::test_video<span class="o">[</span>ar1335_ap1302_perf<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Actual fps: <span class="m">30</span>.0, Target fps:30 - Actual fps within accepted range
Test passed
End of <span class="nb">test</span>
PASSED
video/test_bist_video.py::test_video<span class="o">[</span>tpg_ap1302_ximagesink<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Please observe the pop-up window
Do you see color bar <span class="nb">test</span> pattern <span class="k">in</span> the window <span class="o">[</span>Y/N<span class="o">]</span>?
y
User reports that pattern was observed <span class="k">in</span> the window
Test passed
End of <span class="nb">test</span>
PASSED
video/test_bist_video.py::test_video<span class="o">[</span>tpg_ap1302_perf<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Actual fps: <span class="m">30</span>.003, Target fps:30 - Actual fps within accepted range
Test passed
End of <span class="nb">test</span>
PASSED
video/test_bist_video.py::test_video<span class="o">[</span>imx219_filesink<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>

<span class="o">(</span>gst-launch-1.0:89<span class="o">)</span>: GStreamer-CRITICAL **: <span class="m">21</span>:29:17.009: gst_structure_fixate_field_nearest_int: assertion <span class="s1">&#39;IS_MUTABLE (structure)&#39;</span> failed

<span class="o">(</span>gst-launch-1.0:89<span class="o">)</span>: GStreamer-CRITICAL **: <span class="m">21</span>:29:17.009: gst_structure_fixate_field_nearest_int: assertion <span class="s1">&#39;IS_MUTABLE (structure)&#39;</span> failed

<span class="o">(</span>gst-launch-1.0:89<span class="o">)</span>: GStreamer-CRITICAL **: <span class="m">21</span>:29:17.010: gst_structure_fixate_field_nearest_fraction: assertion <span class="s1">&#39;IS_MUTABLE (structure)&#39;</span> failed
Test Image and Golden Image match
Test passed
End of <span class="nb">test</span>
PASSED
video/test_bist_video.py::test_video<span class="o">[</span>imx219_perf<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Actual fps: <span class="m">30</span>.004, Target fps:30 - Actual fps within accepted range
Test passed
End of <span class="nb">test</span>
PASSED
video/test_bist_video.py::test_video<span class="o">[</span>ar1335_filesink<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
<span class="o">(</span>gst-launch-1.0:89<span class="o">)</span>: GStreamer-CRITICAL **: <span class="m">21</span>:29:17.009: gst_structure_fixate_field_nearest_int: assertion <span class="s1">&#39;IS_MUTABLE (structure)&#39;</span> failed

<span class="o">(</span>gst-launch-1.0:89<span class="o">)</span>: GStreamer-CRITICAL **: <span class="m">21</span>:29:17.009: gst_structure_fixate_field_nearest_int: assertion <span class="s1">&#39;IS_MUTABLE (structure)&#39;</span> failed

<span class="o">(</span>gst-launch-1.0:89<span class="o">)</span>: GStreamer-CRITICAL **: <span class="m">21</span>:29:17.010: gst_structure_fixate_field_nearest_fraction: assertion <span class="s1">&#39;IS_MUTABLE (structure)&#39;</span> failed
Test Image and Golden Image match
Test passed
End of <span class="nb">test</span>
PASSED
video/test_bist_video.py::test_video<span class="o">[</span>ar1335_perf<span class="o">]</span>
-------------------------------- live log call ---------------------------------
------------------------------------------
Start of <span class="nb">test</span>
Actual fps: <span class="m">30</span>.004, Target fps:30 - Actual fps within accepted range
Test passed
End of <span class="nb">test</span>
PASSED                                                                   <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">====================</span> <span class="m">8</span> passed, <span class="m">26</span> deselected <span class="k">in</span> <span class="m">42</span>.11s <span class="o">=======================</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="overview.html"><span class="doc">BIST Overview</span></a></p></li>
</ul>
<p class="sphinxhide" align="center"><sub>Copyright © 2023 Advanced Micro Devices, Inc</sub></p><p class="sphinxhide" align="center"><sup><a href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></sup></p></div>
</div>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../bist_landing.html" class="btn btn-neutral float-left" title="BIST" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="overview.html" class="btn btn-neutral float-right" title="BIST Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on June 21, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>