<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Machine Vision Application Deployment &mdash; Kria™ KR260 2022.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Tool Flow Overview" href="../../building_the_design.html" />
    <link rel="prev" title="Introduction to Sensor Capture and 10GigE" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Kria™ KR260
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/index.html">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications/latest/build/html/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kria_som_ubuntu_support/build/html/index.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/main/build/html/index.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KR260 Applications</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../10gige_vision_camera_landing.html">10GigE Vision Camera</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../10gige_vision_camera_landing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10gige_vision_camera_landing.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../10gige_vision_camera_landing.html#quick-start">Quick Start</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setting up the Board and Application deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-test-environment">Setting Up the Test Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-the-linux-image">Boot the Linux Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installing-the-10gige-package">Installing the 10GigE package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#firmware-loading">Firmware Loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-10gige-application-on-target">Running the 10GigE Application on Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../10gige_vision_camera_landing.html#tutorials">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10gige_vision_camera_landing.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10gige_vision_camera_landing.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ros2_multinode_communication_via_tsn/ros2_multinode_communication_via_tsn_landing.html">ROS 2 Multi-Node Communications via TSN</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.xilinx.com/products/app-store/kria/ros-2-perception-node.html">ROS 2 Perception Node</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KR260 Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../building_the_design.html">Building the Design components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build_vivado_design.html">Building the Hardware design using Vivado</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build_vitis_platform.html">Creating a Vitis Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generating_custom_firmware.html">Generating Custom Firmware</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Kria™ KR260</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../10gige_vision_camera_landing.html">10GigE Vision Camera</a> &raquo;</li>
      <li>Machine Vision Application Deployment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/10gige_vision_camera/docs/app_deployment.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table>
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>Kria&trade; KR260 Robotics Starter Kit</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Machine Vision Camera Tutorial</h1> </td>
 </tr>
</table><div class="section" id="machine-vision-application-deployment">
<h1>Machine Vision Application Deployment<a class="headerlink" href="#machine-vision-application-deployment" title="Permalink to this heading">¶</a></h1>
<div class="section" id="setting-up-the-test-environment">
<h2>Setting Up the Test Environment<a class="headerlink" href="#setting-up-the-test-environment" title="Permalink to this heading">¶</a></h2>
<p>This document shows how to set up the board and run the <strong>10GigE</strong> application.</p>
<div class="section" id="hardware-requirements">
<h3>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span>  <span class="n">KR260</span> <span class="n">Robotics</span> <span class="n">Starter</span> <span class="n">Kit</span>

<span class="n">b</span><span class="o">.</span>  <span class="n">KR260</span> <span class="n">Power</span> <span class="n">Supply</span> <span class="o">&amp;</span> <span class="n">Adapter</span> <span class="p">(</span><span class="n">Included</span> <span class="k">with</span> <span class="n">KR260</span> <span class="n">Robotics</span> <span class="n">Starter</span> <span class="n">Kit</span><span class="p">)</span>

<span class="n">c</span><span class="o">.</span>  <span class="n">Cat</span> <span class="mi">5</span><span class="n">e</span> <span class="n">Ethernet</span> <span class="n">Cable</span> <span class="p">(</span><span class="n">Included</span> <span class="k">with</span> <span class="n">KR260</span> <span class="n">Robotics</span> <span class="n">Starter</span> <span class="n">Kit</span><span class="p">)</span>

<span class="n">d</span><span class="o">.</span>  <span class="n">USB</span><span class="o">-</span><span class="n">A</span> <span class="n">to</span> <span class="n">micro</span><span class="o">-</span><span class="n">B</span> <span class="n">Cable</span> <span class="p">(</span><span class="n">Included</span> <span class="k">with</span> <span class="n">KR260</span> <span class="n">Robotics</span> <span class="n">Starter</span> <span class="n">Kit</span><span class="p">)</span>

<span class="n">e</span><span class="o">.</span>  <span class="mi">16</span><span class="n">GB</span> <span class="n">MicroSD</span> <span class="n">Cards</span> <span class="p">(</span><span class="n">Included</span> <span class="k">with</span> <span class="n">KR260</span> <span class="n">Robotics</span> <span class="n">Starter</span> <span class="n">Kit</span><span class="p">)</span>

<span class="n">f</span><span class="o">.</span>  <span class="mi">2</span> <span class="n">Windows</span><span class="o">/</span><span class="n">Ubuntu</span> <span class="n">PC</span><span class="p">,</span> <span class="n">one</span> <span class="k">for</span> <span class="n">capture</span> <span class="n">the</span> <span class="n">UART</span><span class="o">/</span><span class="n">console</span> <span class="n">logs</span> <span class="kn">from</span> <span class="nn">KR260</span> <span class="n">board</span> <span class="ow">and</span> <span class="n">one</span> <span class="k">as</span> <span class="n">host</span> <span class="n">PC</span>

    <span class="n">i</span><span class="o">.</span>  <span class="n">Windows</span><span class="o">-</span><span class="mi">10</span> <span class="ow">or</span> <span class="n">latest</span>
    <span class="n">ii</span><span class="o">.</span> <span class="n">Ubuntu</span><span class="o">-</span><span class="mf">16.04</span> <span class="ow">or</span> <span class="n">latest</span>

<span class="n">g</span><span class="o">.</span>  <span class="n">Fiber</span> <span class="n">Optic</span> <span class="n">cable</span>

<span class="n">h</span><span class="o">.</span>  <span class="n">IMX547</span> <span class="n">sensor</span> <span class="n">Module</span>

<span class="n">i</span><span class="o">.</span>  <span class="mi">10</span><span class="n">G</span> <span class="n">NIC</span> <span class="n">Card</span>

<span class="n">j</span><span class="o">.</span>  <span class="mi">10</span><span class="n">G</span> <span class="n">SFP</span><span class="o">+</span> <span class="n">Transceiver</span>
</pre></div>
</div>
<p>Some reference for 10G NIC Card, fiber optic cable, 10G SFP+ Transceiver are listed below:</p>
<p>10G Network cards:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.amazon.com/dp/B01LZRSQM9?pd_rd_i=B01LZRSQM9&amp;pd_rd_w=TcxxK&amp;pf_rd_p=3465d0d7-4e28-4692-b633-326c458deaa4&amp;pd_rd_wg=KlLZ9&amp;pf_rd_r=DW3Z81ZGWVXPFSR0KAFN&amp;pd_rd_r=68b63a0c-1d6b-4770-80e0-79ad47e1a511">X520-10G-1S</a> (not tested yet at S2I)</p></li>
<li><p><a class="reference external" href="https://www.amazon.de/E10G42BTDA-10Gbps-Ethernet-Adapter-X520-da2/dp/B002I9L7PS/ref=sr_1_16?crid=3VYPG8MA3C5PL&amp;dchild=1&amp;keywords=intel+sfp%2B10g&amp;qid=1621936558&amp;sprefix=intel+sfp%2B%2Caps%2C195&amp;sr=8-16">E10G42BTDA X520-da2</a> (might
need Intel coded SFP+ modules)</p></li>
</ul>
<p>Fiber Cable:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.amazon.com/dp/B089K3VYZ1/ref=sspa_dk_detail_1?pd_rd_i=B0897B8SW7&amp;pd_rd_w=OvoqM&amp;pf_rd_p=5d846283-ed3e-4512-a744-a30f97c5d738&amp;pd_rd_wg=Jh1DR&amp;pf_rd_r=GC2RTS0AHW0JF70BFD4B&amp;pd_rd_r=4f75d78a-f377-4749-bdcd-ee4a7c207f09&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExRzJBWlQxUFRVS1NOJmVuY3J5cHRlZElkPUEwNzA3NTk0Mzc2UUFFNUpRRTkwQyZlbmNyeXB0ZWRBZElkPUEwNDYxMzA0MlRPNjY3UllTV1RJVCZ3aWRnZXROYW1lPXNwX2RldGFpbF90aGVtYXRpYyZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU&amp;th=1">OM3 LC-LC Fiber Optic Patch Cable Multimode 10Gb</a></p></li>
</ul>
<p>Two SFP+ Modules:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.amazon.com/10Gtek-SFP-10G-SR-Transceiver-10GBASE-SR-300-meter/dp/B08BP55663/ref=pd_bxgy_img_2/143-6278076-9705018?_encoding=UTF8&amp;pd_rd_i=B00U8Q7946&amp;pd_rd_r=5e4b9782-8061-4262-8bc7-c59b5e76d816&amp;pd_rd_w=izpJI&amp;pd_rd_wg=XpNSU&amp;pf_rd_p=fd3ebcd0-c1a2-44cf-aba2-bbf4810b3732&amp;pf_rd_r=Z768SJSGXZWNJXANGWVW&amp;refRID=Z768SJSGXZWNJXANGWVW&amp;th=1">10GBase-SR SFP+ Transceiver</a></p></li>
</ul>
</div>
<div class="section" id="som-board-setup">
<h3>SOM Board setup<a class="headerlink" href="#som-board-setup" title="Permalink to this heading">¶</a></h3>
<p>Please refer to KR260 Board &amp; Interface layout below for connector reference numbers:</p>
<p><img alt="board interfaces" src="../../../_images/board_interfaces.png" /></p>
<p><img alt="usb slot" src="../../../_images/usb_slot.png" /></p>
<blockquote>
<div><p><strong>Note</strong>: Skip Step 1 (Flashing the SD Card), if you have already flashed the SD Card with the KR260 Robotics Starter Kit Image.</p>
</div></blockquote>
<ol>
<li><p>Flashing the SD Card</p>
<p>Follow the instruction from the <a class="reference external" href="https://www.xilinx.com/products/som/kria/kr260-robotics-starter-kit/kr260-getting-started/setting-up-the-sd-card-image.html">Kria KR260 getting started page</a> to obtain Ubuntu image and flash SD card.</p>
</li>
<li><p>Insert the SD card into slot at J11.</p></li>
<li><p>UART/JTAG interface:</p>
<p>a. For interacting and seeing boot-time information, connect a USB debugger to the J4.</p>
<p>b. Open a serial terminal program (teraterm, putty etc) on UART monitoring laptop and connect to COM port corresponding to the board.</p>
<p>c. Com Parameters: Speed: 115200, Data bits: 8, Stop bits: 1, Parity: None, Flow control: Xon/Xoff</p>
</li>
<li><p>Ensure that the board is powered off. Connect IMX547 sensor module to J22 in KR260 using flex cable refer below figure:</p>
<p><img alt="IMX547 Sensor Camera" src="../../../_images/IMX547_sensor_camera_1.png" /></p>
<p><img alt="IMX547 Sensor Camera" src="../../../_images/IMX547_sensor_camera_2.png" /></p>
</li>
<li><p>Keep the KR260 board and sensor module firmly held in a static position.</p></li>
<li><p>Connect Ethernet cable from PS ethernet ‘J10C’ to your local network with DHCP enabled to install packages.</p></li>
<li><p>Connect the fiber optic cable to SFP+ connector in KR260 board, other end to host machine (Windows/Ubuntu) NIC card.</p></li>
<li><p>Power supply: 12V 3A adapter to be plugged into the DC jack at J12.</p></li>
</ol>
<p>The KR260 board connection should be as shown in the below figure:</p>
<p><img alt="Board Connection" src="../../../_images/KR_260_Board_connection.png" /></p>
</div>
<div class="section" id="host-machine-setup">
<h3>Host Machine Setup<a class="headerlink" href="#host-machine-setup" title="Permalink to this heading">¶</a></h3>
<p>Check the available network interfaces before inserting the 10G NIC card using</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">-a</span></code> for ubuntu host</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipconfig</span> <span class="pre">/all</span></code> for windows host</p></li>
</ul>
<p>Install the 10Gb PCIe NIC Network Card in the PCIe slot as shown in figure below,</p>
<p><img alt="Host Machine Setup" src="../../../_images/Host_machine_setup.png" /></p>
<p>Connect the fiber optic cable one end to NIC card in host machine and the other end to KR260 board SFP+ connector.</p>
<p>The newly inserted NIC card will show the new interface in the host machine. User may run the same command to verify that:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">-a</span></code> for ubuntu host</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipconfig</span> <span class="pre">/all</span></code> for windows host</p></li>
</ul>
</div>
</div>
<div class="section" id="boot-the-linux-image">
<h2>Boot the Linux Image<a class="headerlink" href="#boot-the-linux-image" title="Permalink to this heading">¶</a></h2>
<p>Power on the board, and boot Linux image:</p>
<blockquote>
<div><p><strong>NOTE</strong>: Only perform this step if you are booting the Starter kit for the first time. Otherwise, log in with the <em>ubuntu</em> username and the password that was previously set.</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">Linux</span> <span class="n">image</span> <span class="n">will</span> <span class="n">boot</span> <span class="n">into</span> <span class="n">the</span> <span class="n">following</span> <span class="n">login</span> <span class="n">prompt</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>    kria login:
</pre></div>
</div>
<p>Use the <em>ubuntu</em> user for login. login password will expire and You will be prompted to set a new password when executing sudo commands.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>   kria login: ubuntu
   Password: ubuntu
   ubuntu@kria:<span class="se">\~\$</span> sudo touch file.txt
   <span class="se">\[</span>sudo<span class="se">\]</span> password <span class="k">for</span> ubuntu:
   sudo: Account or password is expired, reset your password and tryagain
   Changing password <span class="k">for</span> ubuntu.
   Current password:
   New password:
   Retype new password:
</pre></div>
</div>
<p>The <em>ubuntu</em> user does not have root privileges. Most commands used in subsequent tutorials must be run using <em>sudo</em> and you may be prompted to enter your password.</p>
<blockquote>
<div><p><strong>Note:</strong> For security, by default, the root user is disabled. If user want to login as root user, perform the following steps. Use the <em>ubuntu</em> user’s password on the first password prompt, then set a new password for the root user. User can now login as root user using the newly set root user password.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ubuntu@kria:\~\$ sudo -i
sudo\] password for ubuntu:
root@kria:\~#
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="installing-the-10gige-package">
<h2>Installing the 10GigE package<a class="headerlink" href="#installing-the-10gige-package" title="Permalink to this heading">¶</a></h2>
<p>Install the latest application packages.</p>
<ol>
<li><p>Add Xilinx apps repository to download the apps:</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">add-apt-repository</span> <span class="pre">ppa:xilinx-apps</span></code></p>
</li>
<li><p>Check the package feed for new updates.</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">update</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">upgrade</span></code></p>
<p>Confirm with “Y” when prompted to install new or updated packages.</p>
</li>
<li><p>Get the list of available packages in the feed:</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">xmutil</span> <span class="pre">getpkgs</span></code></p>
</li>
<li><p>Install the application.</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">xlnx-app-kr260-mv-defect-detect</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">gstreamer1.0-plugins-bad</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">restart</span> <span class="pre">dfx-mgr.service</span></code></p>
<blockquote>
<div><p><strong>Note :</strong> Installing firmware binaries may cause dfx-mgr to crash and a restart is needed, which is listed in the known issues section. Once this is fixed an newer updates are available for dfx-manager, restart may not be needed.</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="firmware-loading">
<h2>Firmware Loading<a class="headerlink" href="#firmware-loading" title="Permalink to this heading">¶</a></h2>
<p>The 10GigE application firmware consists of bitstream(bit.bin) and device tree overlay (<em>dtbo</em>). The 10GigE firmware is loaded dynamically on user request once ubuntu system is fully booted. Use the <em>xmutil</em> utility to list and load the firmware.</p>
<p>To list the available accelerator applications, run:</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">xmutil</span> <span class="pre">listapps</span></code></p>
<blockquote>
<div><p><strong>Note</strong>: The Active_Slot column shows the application firmware that is currently loaded in the system. The value ‘-1’ indicates that the firmware is not loaded, while the value of ‘0’ indicates that the firmware is loaded. By default, only the <em>k26-starter-kits</em> firmware is loaded.</p>
</div></blockquote>
<p>To load the 10GigE application firmware, unload the existing firmware and then load the 10GigE application firmware:</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">xmutil</span> <span class="pre">unloadapp</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">xmutil</span> <span class="pre">loadapp</span> <span class="pre">kr260-mv-camera</span></code></p>
</div>
<div class="section" id="running-the-10gige-application-on-target">
<h2>Running the 10GigE Application on Target<a class="headerlink" href="#running-the-10gige-application-on-target" title="Permalink to this heading">¶</a></h2>
<p>There is only one way to invoke the application and that is by command line.</p>
<blockquote>
<div><p><strong>Note</strong>: The application needs to be run with <em>sudo</em>. Only one instance of the application can run at a time. Only 2472 x 2128 &#64;122fps – 10bpp configuration is validated.</p>
</div></blockquote>
<p>To run the application, follow below steps:</p>
<ol>
<li><p>Navigate to application binary path
<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">\&lt;app</span> <span class="pre">installation</span> <span class="pre">path\&gt;</span></code></p>
<p><em>For example</em> <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">/opt/xilinx/xlnx-app-kr260-mv-defect-detect/bin/</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/opt/xilinx/xlnx-app-kr260-mv-defect-detect/lib/</span></code></p>
</li>
<li><p>Run the configure script to configure the media nodes &amp; the IP’s in capture path</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">./configure</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">./update_eeprom_wrapper</span></code></p>
<p>It will ask user to give few inputs, user will get below logs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Update</span> <span class="n">eeprom</span>

<span class="n">file</span><span class="p">:</span> <span class="n">xgvrd</span><span class="o">-</span><span class="n">kr260</span><span class="o">.</span><span class="n">xml</span>
<span class="n">size</span><span class="p">:</span> <span class="mi">113757</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>Note</strong>: Select always 1 in the Network configuration below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">:</span> <span class="mh">0xFEC00000</span> <span class="p">(</span><span class="n">MVDK</span> <span class="o">+</span> <span class="n">ZX5</span><span class="o">/</span><span class="n">XU1</span> <span class="o">/</span> <span class="n">ZC702</span> <span class="o">/</span> <span class="n">ZC706</span> <span class="o">/</span> <span class="n">ZCU102</span><span class="p">)</span>
<span class="mi">2</span><span class="p">:</span> <span class="mh">0xFFA10000</span>
</pre></div>
</div>
</div></blockquote>
<p>Then, user can select the type of network:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="mi">1</span><span class="p">:</span> <span class="n">dhcp</span>
  <span class="mi">2</span><span class="p">:</span> <span class="n">static</span> <span class="n">ip</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>Note</strong>: Select 1 or 2 based on user network configuration (static or dynamic). If user opted for static option then user need to fill below details as well. We have given example values for user’s reference.</p>
<p>Input ip address (xxx.xxx.xxx.xxx): <strong>192.168.174.10</strong></p>
<p>Input netmask (xxx.xxx.xxx.xxx): <strong>255.255.255.0</strong></p>
<p>Input gateway (xxx.xxx.xxx.xxx):<strong>192.168.174.11</strong></p>
</div></blockquote>
</li>
<li><p>Run below command and get the interface name which has memory address like <strong>memory 0xa0060000-a006ffff</strong></p>
<p>a.  <code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">-a</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">eth2</span><span class="p">:</span> <span class="n">flags</span><span class="o">=</span><span class="mi">3</span>\<span class="o">&lt;</span><span class="n">UP</span><span class="p">,</span><span class="n">BROADCAST</span>\<span class="o">&gt;</span>  <span class="n">mtu</span> <span class="mi">1500</span>
    <span class="n">ether</span> <span class="mi">00</span><span class="p">:</span><span class="mi">0</span><span class="n">a</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">02</span>  <span class="n">txqueuelen</span> <span class="mi">1000</span>  <span class="p">(</span><span class="n">Ethernet</span><span class="p">)</span>
    <span class="n">RX</span> <span class="n">packets</span> <span class="mi">0</span>  <span class="nb">bytes</span> <span class="mi">0</span> <span class="p">(</span><span class="mf">0.0</span> <span class="n">B</span><span class="p">)</span>
    <span class="n">RX</span> <span class="n">errors</span> <span class="mi">0</span>  <span class="n">dropped</span> <span class="mi">0</span>  <span class="n">overruns</span> <span class="mi">0</span>  <span class="n">frame</span> <span class="mi">0</span>
    <span class="n">TX</span> <span class="n">packets</span> <span class="mi">4</span>  <span class="nb">bytes</span> <span class="mi">590</span> <span class="p">(</span><span class="mf">590.0</span> <span class="n">B</span><span class="p">)</span>
    <span class="n">TX</span> <span class="n">errors</span> <span class="mi">0</span>  <span class="n">dropped</span> <span class="mi">0</span> <span class="n">overruns</span> <span class="mi">0</span>  <span class="n">carrier</span> <span class="mi">0</span>  <span class="n">collisions</span> <span class="mi">0</span>
    <span class="n">device</span> <span class="n">interrupt</span> <span class="mi">66</span>  <span class="n">memory</span> <span class="mh">0xa0060000</span><span class="o">-</span><span class="n">a006ffff</span>
</pre></div>
</div>
<p>Keyword <strong>memory 0xa0060000-a006ffff</strong> belongs to eth2 port. this interface info is required to feed while running gvrd application on target.</p>
</li>
<li><p>Run the <em>gst-launch</em> command in background to trigger the pipeline,</p>
<p>For 60 fps run below commands</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>media-ctl -d /dev/media0 -V <span class="s2">&quot;\&quot;imx547 7-001a\&quot;:0 [fmt:SRGGB10_1X10/1920x1080 field:none @1/60]&quot;</span>
gst-launch-1.0 v4l2src <span class="nv">device</span><span class="o">=</span>/dev/video0 io-mode<span class="o">=</span><span class="m">4</span> ! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">1920</span>, <span class="nv">height</span><span class="o">=</span><span class="m">1080</span>, <span class="nv">format</span><span class="o">=</span>RGB, <span class="nv">framerate</span><span class="o">=</span><span class="m">60</span>/1 !  queue ! fakevideosink -v <span class="p">&amp;</span>
</pre></div>
</div>
<p>For 120 fps run below commands</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>media-ctl -d /dev/media0 -V <span class="s2">&quot;\&quot;imx547 7-001a\&quot;:0 [fmt:SRGGB10_1X10/1920x1080 field:none @1/120]&quot;</span>
gst-launch-1.0 v4l2src <span class="nv">device</span><span class="o">=</span>/dev/video0 io-mode<span class="o">=</span><span class="m">4</span> ! video/x-raw, <span class="nv">width</span><span class="o">=</span><span class="m">1920</span>, <span class="nv">height</span><span class="o">=</span><span class="m">1080</span>, <span class="nv">format</span><span class="o">=</span>RGB, <span class="nv">framerate</span><span class="o">=</span><span class="m">120</span>/1 !  queue ! fakevideosink -v <span class="p">&amp;</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>Note:</strong> Make sure you kill the gst-launch process before unloading xlnx-app-kr260-mv-camera.</p>
</div></blockquote>
</li>
<li><p>Run the following command to run the gvrd application</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gvrd <span class="se">\&lt;</span>10gige port detail<span class="se">\&gt;</span>
</pre></div>
</div>
<p>For an example, <code class="docutils literal notranslate"><span class="pre">./gvrd</span> <span class="pre">eth2</span></code></p>
<blockquote>
<div><p><strong>Note:</strong> Once you are done with the 10GigE application, to switch to another accelerator application, you can unload the currently loaded accelerator application firmware by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">xmutil</span> <span class="n">unloadapp</span> <span class="n">xlnx</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">kr260</span><span class="o">-</span><span class="n">mv</span><span class="o">-</span><span class="n">camera</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>On Host PC to run the Sphinx application:</p>
<p>Sphinx GEV Viewer can be downloaded from <a class="reference external" href="https://www.euresys.com/en/About-us/Blog-event/News/New-GigE-Vision-Viewer-for-AMD-Xilinx-Kria-KR260-R">here</a> along with Sphinx GEV Viewer user guide link to run the Sphinx application.</p>
<p><strong>Pre-Requisites:</strong></p>
<p>a). If user is setting the IP statically make sure both KR260 and host machine should be on the same network class address</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- On ubuntu : sudo ifconfig &lt;10G network interface&gt; &lt;IPv4 adress&gt; up

 For Example: `sudo ifconfig enp23s0 192.168.174.80 up`

- On Windows : Set from network settings – IPv4 IP
</pre></div>
</div>
<p>b). To change the MTU Size follow the below procedure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> - For ubuntu : sudo ifconfig &lt;10G network interface&gt; mtu 9014 up

 For Example: `sudo ifconfig enp23s0 mtu 9014 up`

 - For Windows :
     * Go to settings, navigate to control panel, and select **Network and Sharing Centre**,
     * Select **Change adapter settings**,
     * Right click on the NIC interface on which you want to enable Jumbo Frames and select **Properties**,
     * From the NIC properties, select **Configure**,
     * Click on **Advanced** tab,  
     * In Advanced section, select **Jumbo Frame**,
     * In the Value field **Value** – select 9KB MTU s
</pre></div>
</div>
<p>c). Download <a class="reference external" href="https://github.com/Xilinx/mv-defect-detect/blob/xlnx_rel_v2022.1/10gige/application/xgvrd-kr260.xml">xgvrd-kr260.xml</a> into host machine. In sphinx GEV viewer application, set the downloaded xml file path in the GUI.</p>
</li>
</ol>
<div class="section" id="sensor-calibration-for-the-live-source">
<h3><strong>Sensor Calibration for the Live Source</strong><a class="headerlink" href="#sensor-calibration-for-the-live-source" title="Permalink to this heading">¶</a></h3>
<p>User can use v4ls utilities to tune various sensor parameters, for example</p>
<p><code class="docutils literal notranslate"><span class="pre">v4l2-ctl</span> <span class="pre">-d</span> <span class="pre">/dev/v4l-subdev0</span> <span class="pre">-c</span> <span class="pre">exposure=10000</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">v4l2-ctl</span> <span class="pre">-d</span> <span class="pre">/dev/v4l-subdev0</span> <span class="pre">-c</span> <span class="pre">black_level=150</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">v4l2-ctl</span> <span class="pre">-d</span> <span class="pre">/dev/v4l-subdev0</span> <span class="pre">-c</span> <span class="pre">gain=250</span></code></p>
</div>
<div class="section" id="file-structure-of-the-application">
<h3><strong>File Structure of the Application</strong><a class="headerlink" href="#file-structure-of-the-application" title="Permalink to this heading">¶</a></h3>
<p>The application is comprised of the following files:</p>
<p>Below files are present in <em>app</em> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> `/opt/xilinx/xlnx-app-kr260-mv-defect-detect/`
</pre></div>
</div>
<table border="1" class="docutils">
<thead>
<tr>
<th>File name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bin/</td>
<td>contains the binaries for 10GigE application</td>
</tr>
<tr>
<td>lib/</td>
<td>contains the shared libraries for 10GigE application</td>
</tr>
</tbody>
</table><p>Below files are present in bin directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> `/opt/xilinx/xlnx-app-kr260-mv-defect-detect/bin/`
</pre></div>
</div>
<table border="1" class="docutils">
<thead>
<tr>
<th>File name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>update_atable</td>
<td>Application to create config file atable</td>
</tr>
<tr>
<td>update_eeprom</td>
<td>Application to create config file eeprom</td>
</tr>
<tr>
<td>alloc_table.bin</td>
<td>Data file used by update_atable application</td>
</tr>
<tr>
<td>zcip</td>
<td>Zero configure network interface to configure IPv4</td>
</tr>
<tr>
<td>zcip.script</td>
<td>Used for ZeroConf IPv4 link-local address (the "auto ip alisaing" feature)</td>
</tr>
<tr>
<td>xgvrd-kr260.xml</td>
<td>xml containing the GenICam register description</td>
</tr>
<tr>
<td>gvrd</td>
<td>Application executable</td>
</tr>
<tr>
<td>eeprom.bin</td>
<td>Data file used by update_eeprom application</td>
</tr>
<tr>
<td>configure</td>
<td>Script to configure media nodes &amp; IP's in capture path</td>
</tr>
<tr>
<td>update_eeprom_wrapper</td>
<td>Wrapper file to configure 10GigE pipeline</td>
</tr>
</tbody>
</table><p>Below files are present in <em>lib</em> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> `/opt/xilinx/xlnx-app-kr260-mv-defect-detect/lib/`
</pre></div>
</div>
<table border="1" class="docutils">
<thead>
<tr>
<th>File name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>libgigev.so.2.0.1</td>
<td>contains the GigE Vision core firmware</td>
</tr>
<tr>
<td>libgigev.so.2.0</td>
<td>contains the symbolic link to libgigev.so.2.0.1</td>
</tr>
<tr>
<td>libgigev.so</td>
<td>contains the Symbolic link to libgigev.so.2.0</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="debug.html"><span class="doc">Debug</span></a></p></li>
<li><p>Go back to the <a class="reference internal" href="10gige.html"><span class="doc">MV Camera 10GigE</span></a></p></li>
</ul>
<!---

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License.

You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.

--></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction to Sensor Capture and 10GigE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../building_the_design.html" class="btn btn-neutral float-right" title="Tool Flow Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on August 25, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>