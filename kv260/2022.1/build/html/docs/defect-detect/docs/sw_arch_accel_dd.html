<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Software Architecture of the Accelerator &mdash; Kria™ KV260 2022.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Hardware Architecture of the Platform" href="hw_arch_platform_dd.html" />
    <link rel="prev" title="System Architecture of the Platform" href="sw_arch_platform_dd.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Kria™ KV260
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/dfx.html">Dynamic Function eXchange</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ipmi_eeprom.html">IPMI EEPROM Design Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/yocto.html">Yocto Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/xen.html">XEN Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KV260 Applications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../smartcamera/smartcamera_landing.html">Smart Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aibox-reid/aibox_landing.html">AI Box ReID</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../defectdetect_landing.html">Defect Detect</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../defectdetect_landing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../defectdetect_landing.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../defectdetect_landing.html#tutorials">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../defectdetect_landing.html#architecture">Architecture</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sw_arch_platform_dd.html">Software Architecture - Platform</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Software Architecture - Accelerator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v4l2src">v4l2src</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-files">Configuration Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hw_arch_platform_dd.html">Hardware Architecture - Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="hw_arch_accel_dd.html">Hardware Architecture - Accelerator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../defectdetect_landing.html#repository">Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../defectdetect_landing.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../nlp-smartvision/nlp_smartvision_landing.html">NLP SmartVision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aibox/aibox-dist_landing.html">AI Box Distributed ReID</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bist/bist_landing.html">Built-In Self Test (BIST)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260/2021.1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260/2020.2/build/html/index.html">2020.2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Kria™ KV260</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../defectdetect_landing.html">Defect Detect</a> &raquo;</li>
      <li>Software Architecture of the Accelerator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/defect-detect/docs/sw_arch_accel_dd.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="../../media/xilinx-logo.png" width="30%"/><h1>Kria&trade; KV260 Vision AI Starter Kit Defect Detection Tutorial</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Software Architecture of the Accelerator</h1> </td>
 </tr>
</table><div class="section" id="software-architecture-of-the-accelerator">
<h1>Software Architecture of the Accelerator<a class="headerlink" href="#software-architecture-of-the-accelerator" title="Permalink to this heading">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This document describes the software architecture of the Defect Detection accelerator application.</p>
<div class="section" id="software-architecture">
<h3>Software Architecture<a class="headerlink" href="#software-architecture" title="Permalink to this heading">¶</a></h3>
<p>In the Defect Detection application, the Computer Vision Starter Kit can take video inputs from a live or a file source. As shown in the following figure, the video inputs will be in the Luma(Y) format, processed and displayed. The AMD Vitis™ overlay includes Vitis Vision libraries that process the frames and detect defects in mangoes.</p>
<p>In this reference design, the resolution on the input frames is 1280 x 800, and the outputs are 3x1280x800 on a 4K display.</p>
<p><img alt="defect process" src="../../../_images/defect-detection-process.png" /></p>
<p>The parts before pre-process plugin and after the mixer for data source and sink respectively, use purely official GStreamer plugins, such as <em>filesrc</em> for file input, <em>v4l2src</em> for MIPI, and <em>Kmssink</em> for the display. Refer to the <a class="reference external" href="https://gstreamer.freedesktop.org/documentation/tutorials/index.html?gi-language=c">GStreamer documentation</a> for detailed usage.</p>
<p>The core acceleration tasks are performed by the Pre-Process and CCA libraries, which are developed by AMD.</p>
<details>
 <summary><b>The following table lists the GStreamer plugins used in the application.</b></summary><table border="1" class="docutils">
<thead>
<tr>
<th>GStreamer Plugins</th>
<th>Definition</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>v4l2src</td>
<td>Image capturing from the live camera source</td>
<td>V4l2 source</td>
</tr>
<tr>
<td>Kmssink</td>
<td>For the display</td>
<td>Upstream GStreamer</td>
</tr>
<tr>
<td>Queue</td>
<td>Simple data queue</td>
<td>Upstream GStreamer</td>
</tr>
<tr>
<td>Tee</td>
<td>1-to-N pipe fitting</td>
<td>Upstream GStreamer</td>
</tr>
<tr>
<td>VVAS xfilter</td>
<td>Kernel Library: <em>gaussian_otsu</em>. Vitis Vision library for the Gaussian + OTSU detector. Preserves edges while smoothening and calculates the optimum threshold between foreground and background pixels.</td>
<td>AMD Opensource Plugin</td>
</tr>
<tr>
<td>VVAS xfilter</td>
<td>Kernel Library: <em>threshold_median</em>. Vitis Vision library to convert a grey-scale image to a binary image and filter out noise from the image.</td>
<td>AMD Opensource Plugin</td>
</tr>
<tr>
<td>VVAS xfilter</td>
<td>Kernel Library: <em>cca_accelerator</em>. Vitis Vision library to determine the defective pixels in the image.</td>
<td>AMD Opensource Plugin</td>
</tr>
<tr>
<td>VVAS xfilter</td>
<td>Kernel Library: <em>text2overlay</em>. <em>OpenCV</em> software library to calculate the defect density, determine the quality of the mango, and embed text as result into output images.</td>
<td>AMD Opensource Plugin</td>
</tr>
<tr>
<td>____</td>
<td></td>
<td></td>
</tr>
</tbody>
</table></details><details>
 <summary><b>The following table lists the component types used in the application.</b></summary><table border="1" class="docutils">
<thead>
<tr>
<th>Pipeline</th>
<th>Component</th>
<th>Component Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pre-Process</td>
<td>Gaussian + OTSU Accelerator</td>
<td>PL</td>
</tr>
<tr>
<td></td>
<td>Threshold + Median Filter</td>
<td>PL</td>
</tr>
<tr>
<td>Defect Decision</td>
<td>CCA</td>
<td>PL</td>
</tr>
<tr>
<td></td>
<td>Text2Overlay + Defect Decision</td>
<td>SW</td>
</tr>
</tbody>
</table><hr class="docutils" />
</details></div>
</div>
<div class="section" id="v4l2src">
<h2>v4l2src<a class="headerlink" href="#v4l2src" title="Permalink to this heading">¶</a></h2>
<details>
 <summary><b>Click here to view details</b></summary><p>v4l2src is an open source plugin. The underlying GStreamer plugin uses the AR0144 sensor and the AP1302 ISP. The data flow is as follows:</p>
<p><img alt="plugin data flow" src="../../../_images/v4l2src-data-flow.png" /></p>
</details><div class="section" id="in-house-plugins">
<h3>In-House Plugins<a class="headerlink" href="#in-house-plugins" title="Permalink to this heading">¶</a></h3>
<p>The following are the in-house plugins:</p>
<div class="section" id="pre-process">
<h4>Pre-process<a class="headerlink" href="#pre-process" title="Permalink to this heading">¶</a></h4>
<details>
 <summary><b>Click here to view details</b></summary><p>The pre-process pipeline is as follows:</p>
<p><img alt="pre-process pipeline" src="../../../_images/preprocessing_pipeline.png" /></p>
<p>The following figure depicts the Pre-Process plugin data flow.</p>
<p><img alt="pre-process data flow" src="../../../_images/preprocess-plugin-data-flow.png" /></p>
<h1>Gaussian_OTSU Accelerator</h1><p>This accelerator has two kernels—Gaussian + OTSU, stitched in streaming fashion.
In general, any smoothing filter smooths the image and will affect the edges of the image. To
preserve the edges while smoothing, you can use a bilateral filter. In an analogous way as the
Gaussian filter, the bilateral filter also considers the neighboring pixels with weights assigned to each of them.</p>
<p>These weights have two components, the first of which is the same weighing used
by the Gaussian filter. The second component takes into account the difference in the intensity
between the neighboring pixels and the evaluated one.</p>
<p>The OTSU threshold is used to automatically perform clustering-based image thresholding or the
reduction of a gray-level image to a binary image. The algorithm assumes that the image contains
two classes of pixels following bi-modal histogram (foreground pixels and background pixels), it
then calculates the optimum threshold separating the two classes.</p>
<p>The following figure depicts the Gaussian + OSTSU plugin software stack.</p>
<p><img alt="OSTSU plugin stack" src="../../../_images/gaussian-plugin-sw-stack.png" /></p>
<p>The following figure depicts the Gaussian + OTSU plugin data flow.</p>
<p><img alt="dataflow" src="../../../_images/gaussian-plugin-dataflow.png" /></p>
<h1>Threshold_Median Accelerator</h1><p>The greyscale image should be converted to a binary image with an appropriate threshold value. The threshold function in the Vitis Vision library can perform the thresholding operation on the input image. This should yield an image that has a black background with the mango area in white.</p>
<p>The median blur filter acts as a non-linear digital filter that reduces noise. A filter size of N outputs the median of the NxN neighborhood pixel values, for each pixel. In this design, N is 3.</p>
<p>This plugin accepts the 1280x800 Y8 image as the input. The plugin applies the threshold binary algorithm to convert the Y8 image to binary image by using the threshold value of the pixel. Later, it applies the Median filter to remove salt and pepper noise.</p>
<p>The following figure depicts the Threshold + Median plugin software stack.</p>
<p><img alt="plugin software stack" src="../../../_images/threshold-plugin-sw-stack.png" /></p>
<p>The following figure depicts the Threshold + Median plugin data flow.</p>
<p><img alt="plugin dataflow" src="../../../_images/threshold-median-plugin-dataflow.png" /></p>
<p>Threshold and Median Blur kernels are connected together using AXI Stream interface.</p>
</details></div>
<div class="section" id="cca">
<h4>CCA<a class="headerlink" href="#cca" title="Permalink to this heading">¶</a></h4>
<details>
 <summary><b>Click here to view details</b></summary><p>The implemented Connected Component Analysis (CCA), is a custom solution to find the defective pixels in the problem object. This algorithm considers few assumptions that the background must to be easily separable from the foreground object.</p>
<p>The custom CCA effectively analyzes the components that are connected to the background pixels and removes the background from the object and defective pixels. The aim is to send the following output information from the function:</p>
<ul class="simple">
<li><p>defect image: Image with only defect pixels marked as ‘255’ and both object pixels and background as ‘0’</p></li>
<li><p>object_pixels: Total non-defective pixels of the object</p></li>
<li><p>defect_pixels: Total defective pixels</p></li>
</ul>
<p>The following figure depicts the CCA plugin software stack.</p>
<p><img alt="CCA plugin software stack" src="../../../_images/cca-plugin-sw-stack.png" /></p>
<p>The following figure depicts the CCA plugin data flow.</p>
<p><img alt="CCA plugin data flow" src="../../../_images/cca-plugin-dataflow.png" /></p>
</details></div>
<div class="section" id="defect-decision">
<h4>Defect Decision<a class="headerlink" href="#defect-decision" title="Permalink to this heading">¶</a></h4>
<details>
 <summary><b>Click here to view details</b></summary><p>The output of the CCA plugin is fed into the Defect Decision block which determines the defect density and decides the quality of the mango. The block performs the following main operations:</p>
<ul class="simple">
<li><p>The ratio of blemished pixels to total mango pixels is calculated to determine how much of the mango’s surface area is covered with blemishes.</p></li>
<li><p>The Defect Decision determines whether the ratio exceeds a user-defined threshold, to decide whether the mango is defected or not.</p></li>
<li><p>The results will be embedded in the image, and the output will be fed to the next plugin for the display.</p></li>
</ul>
<p>The following figure depicts the Defect Decision plugin software stack.</p>
<p><img alt="Decision plugin software stack" src="../../../_images/defect-decision-plugin-sw-stack.png" /></p>
<p>The following figure depicts the Defect Decision plugin data flow.</p>
<p><img alt="Decsiscion plugin flow" src="../../../_images/defect-decision-plugin-dataflow.png" /></p>
</details></div>
</div>
</div>
<div class="section" id="configuration-files">
<h2>Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this heading">¶</a></h2>
<details>
 <summary><b>Click here to view details</b></summary><p>The <strong>defect-detect</strong> application uses the following configuration files.</p>
<ul>
<li><p>Gaussian_OTSU Accelerator</p>
<p>The <code class="docutils literal notranslate"><span class="pre">otsu-accelerator.json</span></code> file is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;xclbin-location&quot;</span><span class="p">:</span> <span class="s2">&quot;/lib/firmware/xilinx/kv260-defect-detect/kv260-defect-detect.xclbin&quot;</span><span class="p">,</span>
  <span class="s2">&quot;vvas-library-repo&quot;</span><span class="p">:</span> <span class="s2">&quot;/opt/xilinx/kv260-defect-detect/lib&quot;</span><span class="p">,</span>
  <span class="s2">&quot;element-mode&quot;</span><span class="p">:</span> <span class="s2">&quot;transform&quot;</span><span class="p">,</span>
  <span class="s2">&quot;kernels&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;kernel-name&quot;</span><span class="p">:</span> <span class="s2">&quot;gaussian_otsu_accel:gaussian_otsu_accel_1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;library-name&quot;</span><span class="p">:</span> <span class="s2">&quot;libvvas_otsu.so&quot;</span><span class="p">,</span>
      <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug_level&quot;</span> <span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>debug_level: Enable or disable debug log for the Kernel library.</p></li>
</ul>
</li>
<li><p>Preprocess Accelerator</p>
<p>The <em>preprocess-accelerator.json</em> file is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;xclbin-location&quot;</span><span class="p">:</span> <span class="s2">&quot;/lib/firmware/xilinx/kv260-defect-detect/kv260-defect-detect.xclbin&quot;</span><span class="p">,</span>
  <span class="s2">&quot;vvas-library-repo&quot;</span><span class="p">:</span> <span class="s2">&quot;/opt/xilinx/kv260-defect-detect/lib&quot;</span><span class="p">,</span>
  <span class="s2">&quot;element-mode&quot;</span><span class="p">:</span> <span class="s2">&quot;transform&quot;</span><span class="p">,</span>
  <span class="s2">&quot;kernels&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;kernel-name&quot;</span><span class="p">:</span> <span class="s2">&quot;preprocess_accel:preprocess_accel_1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;library-name&quot;</span><span class="p">:</span> <span class="s2">&quot;libvvas_preprocess.so&quot;</span><span class="p">,</span>
      <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug_level&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;max_value&quot;</span><span class="p">:</span> <span class="mi">255</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>debug_level: Enable or disable debug log for the Kernel library.</p></li>
<li><p>max_value: Maximum value to use with the THRESH_BINARY thresholding types. For more information, see <a class="reference external" href="https://docs.opencv.org/master/d7/d1b/group__imgproc__misc.html#gae8a4a146d1ca78c626a53577199e9c57">https://docs.opencv.org/master/d7/d1b/group__imgproc__misc.html#gae8a4a146d1ca78c626a53577199e9c57</a>.</p></li>
</ul>
</li>
<li><p>CCA Accelerator</p>
<p>The <em>cca-accelarator.json</em> file is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;xclbin-location&quot;</span><span class="p">:</span> <span class="s2">&quot;/lib/firmware/xilinx/kv260-defect-detect/kv260-defect-detect.xclbin&quot;</span><span class="p">,</span>
  <span class="s2">&quot;vvas-library-repo&quot;</span><span class="p">:</span> <span class="s2">&quot;/opt/xilinx/kv260-defect-detect/lib&quot;</span><span class="p">,</span>
  <span class="s2">&quot;element-mode&quot;</span><span class="p">:</span> <span class="s2">&quot;transform&quot;</span><span class="p">,</span>
  <span class="s2">&quot;kernels&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;kernel-name&quot;</span><span class="p">:</span> <span class="s2">&quot;cca_custom_accel:cca_custom_accel_1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;library-name&quot;</span><span class="p">:</span> <span class="s2">&quot;libvvas_cca.so&quot;</span><span class="p">,</span>
      <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug_level&quot;</span> <span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>debug_level: Enable or disable debug log for the Kernel library.</p></li>
</ul>
</li>
<li><p>Text2Overlay</p>
<p>The <em>text2overlay.json</em> file is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> 
  <span class="s2">&quot;xclbin-location&quot;</span><span class="p">:</span> <span class="s2">&quot;/lib/firmware/xilinx/kv260-defect-detect/kv260-defect-detect.xclbin&quot;</span><span class="p">,</span>
  <span class="s2">&quot;vvas-library-repo&quot;</span><span class="p">:</span> <span class="s2">&quot;/opt/xilinx/kv260-defect-detect/lib&quot;</span><span class="p">,</span>
  <span class="s2">&quot;element-mode&quot;</span><span class="p">:</span><span class="s2">&quot;inplace&quot;</span><span class="p">,</span>
  <span class="s2">&quot;kernels&quot;</span> <span class="p">:[</span>
    <span class="p">{</span>
      <span class="s2">&quot;library-name&quot;</span><span class="p">:</span><span class="s2">&quot;libvvas_text2overlay.so&quot;</span><span class="p">,</span>
      <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug_level&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;font_size&quot;</span> <span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;font&quot;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;x_offset&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;y_offset&quot;</span> <span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="s2">&quot;defect_threshold&quot;</span> <span class="p">:</span> <span class="mf">0.14</span><span class="p">,</span>
        <span class="s2">&quot;is_acc_result&quot;</span> <span class="p">:</span> <span class="mi">0</span>
      <span class="p">}</span>
    <span class="p">}</span>
 <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>debug_level: Enable or disable debug log for the Kernel library.</p></li>
<li><p>font_size: User configuration to change the font size.</p></li>
<li><p>font: User configuration to change the supported font type.</p></li>
<li><p>x_offset: The X co-ordinate from where the text starts writing.</p></li>
<li><p>y_offset: The Y co-ordinate from where the text starts writing.</p></li>
<li><p>defect_threshold: The defect density threshold to calculate the defect. If the defect value is more than the threshold, it falls under defect category.</p></li>
<li><p>is_acc_result: Flag to display the accumulated result. If the value is 0, then the accumulated result will not be displayed.
For more information see <a class="reference external" href="https://docs.opencv.org/3.4/d0/de1/group__core.html#ga0f9314ea6e35f99bb23f29567fc16e11">https://docs.opencv.org/3.4/d0/de1/group__core.html#ga0f9314ea6e35f99bb23f29567fc16e11</a>.</p></li>
</ul>
</li>
</ul>
</details></div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="hw_arch_platform_dd.html"><span class="doc">Hardware Architecture</span></a></p></li>
<li><p><a class="reference internal" href="hw_arch_accel_dd.html"><span class="doc">Hardware Accelerator</span></a></p></li>
</ul>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h3>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>.</p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2021-2023 Xilinx</p></div>
</div>
</div>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sw_arch_platform_dd.html" class="btn btn-neutral float-left" title="System Architecture of the Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hw_arch_platform_dd.html" class="btn btn-neutral float-right" title="Hardware Architecture of the Platform" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on August 17, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>