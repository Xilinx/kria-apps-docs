<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Hardware Architecture of the Accelerator &mdash; Kria™ KV260 2021.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Debugging" href="debug-sc.html" />
    <link rel="prev" title="Hardware Architecture of the Platform" href="hw_arch_platform.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Kria™ KV260
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2021.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KV260 Applications</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../smartcamera_landing.html">Smart Camera</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#tutorials">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../smartcamera_landing.html#architecture">Architecture</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sw_arch_platform.html">Software Architecture - Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="sw_arch_accel.html">Software Architecture - Accelerator</a></li>
<li class="toctree-l3"><a class="reference internal" href="hw_arch_platform.html">Hardware Architecture - Platform</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Hardware Architecture - Accelerator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pre-processing-ips-and-dpu">Pre-processing IPs and DPU</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../smartcamera_landing.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../aibox-reid/aibox_landing.html">AIBox-ReID</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../defect-detect/defectdetect_landing.html">Defect Detect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nlp-smartvision/nlp_smartvision_landing.html">NLP SmartVision</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260/2020.2/build/html/index.html">2020.2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Kria™ KV260</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../smartcamera_landing.html">Smart Camera</a> &raquo;</li>
      <li>Hardware Architecture of the Accelerator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/smartcamera/docs/hw_arch_accel.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="../../media/xilinx-logo.png" width="30%"/><h1> Kria&trade; KV260 Vision AI Starter Kit <br> Smart Camera Tutorial</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1> Hardware Architecture of the Accelerator </h1> </td>
 </tr>
</table><div class="section" id="hardware-architecture-of-the-accelerator">
<h1>Hardware Architecture of the Accelerator<a class="headerlink" href="#hardware-architecture-of-the-accelerator" title="Permalink to this heading">¶</a></h1>
<div class="section" id="pre-processing-ips-and-dpu">
<h2>Pre-processing IPs and DPU<a class="headerlink" href="#pre-processing-ips-and-dpu" title="Permalink to this heading">¶</a></h2>
<p>The Vitis™ software platform overlay includes the pre-processing IPs and DPU.</p>
<p>The pre-processing block as shown in the figure below includes the following functions:</p>
<p><img alt="../../../_images/preprocess_sc.png" src="../../../_images/preprocess_sc.png" /></p>
<ul class="simple">
<li><p>Cvtcolor: Reads an NV12 video frame and converts the color format to BGR</p></li>
<li><p>Resizing: Scales down the original 4K/1080p frame to at most 720x720</p></li>
<li><p>Quantizing: Performs linear transformation (scaling and shifting) to each pixel of BGR frame to satisfy DPU input requirement</p></li>
</ul>
<p>The desgin uses Vitis Vision Library functions to build the pre-processing block. The Vitis functions used are, cvtcolor, resize, and blobfromimage.</p>
<p>The DPU IP as shown in the figure below can be configured.</p>
<p><img alt="../../../_images/dpu_sc.png" src="../../../_images/dpu_sc.png" /></p>
<p>For this design, the following features should be enabled:</p>
<ul class="simple">
<li><p>Channel augmentation</p></li>
<li><p>Depth-wise convolution</p></li>
<li><p>Average pooling</p></li>
<li><p>Relu, LeakyRelu and Relu6</p></li>
<li><p>URAM enable</p></li>
</ul>
<p>To learn more about the DPU, please refer the <a class="reference external" href="https://www.xilinx.com/support/documentation/ip_documentation/dpu/v3_2/pg338-dpu.pdf">PG338</a></p>
<p>Vitis integrates the pre-processing IP and DPU IP in the platform. The table below shows utilization numbers after optimization of the hardware design.</p>
<p><strong>Resource usage of current design</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>K26</th>
<th>CLB LUTs</th>
<th>BRAM</th>
<th>DSP</th>
<th>URAM</th>
</tr>
</thead>
<tbody>
<tr>
<td>Available</td>
<td>117120</td>
<td>144</td>
<td>1248</td>
<td>64</td>
</tr>
<tr>
<td>Platform</td>
<td>18634</td>
<td>19.5</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>Pre-processing</td>
<td>11133</td>
<td>15</td>
<td>37</td>
<td>0</td>
</tr>
<tr>
<td>DPU B3136</td>
<td>45433</td>
<td>67</td>
<td>548</td>
<td>44</td>
</tr>
<tr>
<td>Other*</td>
<td>2700</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Total</td>
<td>77884</td>
<td>101.2</td>
<td>586</td>
<td>52</td>
</tr>
<tr>
<td>Total %</td>
<td>66.50%</td>
<td>70.49%</td>
<td>46.96%</td>
<td>81.25%</td>
</tr>
</tbody>
</table><p>Other* : AXI interconnects and Interrupt concat block added by Vitis</p>
<p>The table below shows estimated DPU performance and overall power on the K26 chip (including 4K based pre-processing and other IPs). The DPU runs at 300MHz/600MHz.</p>
<p><strong>DPU performance and power (estimated)</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th></th>
<th>TOPS (Peak)</th>
<th>TOPS (DenseBox)1</th>
<th>Power (Overall)2</th>
</tr>
</thead>
<tbody>
<tr>
<td>B3136</td>
<td>0.92</td>
<td>0.25</td>
<td>7.9W</td>
</tr>
</tbody>
</table><p><strong>Note:</strong></p>
<ol class="simple">
<li><p>We use DenseBox_640x360 model to estimate the real performance of DPU, and this model has 1.1GOPs;</p></li>
<li><p>We can only estimate the overall power of K26 chip (including DPU and other IPs)</p></li>
</ol>
<p>DPU B3136 bandwidth estimates are shown in the table below</p>
<p><strong>DPU B3136 bandwidth estimates</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Operation</th>
<th>Peak</th>
<th>Average</th>
</tr>
</thead>
<tbody>
<tr>
<td>Write (MB/s)</td>
<td>1300</td>
<td>440</td>
</tr>
<tr>
<td>Read (MB/s)</td>
<td>6200</td>
<td>2600</td>
</tr>
</tbody>
</table></div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="sw_arch_platform.html"><span class="doc">Software Architecture of the Platform</span></a></p></li>
<li><p>Go back to the <a class="reference internal" href="../smartcamera_landing.html"><span class="doc">KV260 AI Box design start page</span></a></p></li>
</ul>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<p>Vitis Vision functions:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries/tree/master/vision/L2/examples/cvtcolor">https://github.com/Xilinx/Vitis_Libraries/tree/master/vision/L2/examples/cvtcolor</a></p></li>
<li><p><a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries/tree/master/vision/L2/examples/resize">https://github.com/Xilinx/Vitis_Libraries/tree/master/vision/L2/examples/resize</a></p></li>
<li><p><a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries/tree/master/vision/L3/benchmarks/blobfromimage">https://github.com/Xilinx/Vitis_Libraries/tree/master/vision/L3/benchmarks/blobfromimage</a></p></li>
</ul>
<p>DPU</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/Xilinx/Vitis-AI/tree/master/dsa/DPU-TRD">https://github.com/Xilinx/Vitis-AI/tree/master/dsa/DPU-TRD</a></p></li>
<li><p><a class="reference external" href="https://www.xilinx.com/support/documentation/ip_documentation/dpu/v3_2/pg338-dpu.pdf">https://www.xilinx.com/support/documentation/ip_documentation/dpu/v3_2/pg338-dpu.pdf</a></p></li>
</ul>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h3>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2021 Xilinx</p></div>
</div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hw_arch_platform.html" class="btn btn-neutral float-left" title="Hardware Architecture of the Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="debug-sc.html" class="btn btn-neutral float-right" title="Debugging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on August 15, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>