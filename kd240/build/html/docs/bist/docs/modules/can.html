<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>BIST CAN Test Module &mdash; Kria™ KD240 1.0 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="BIST Disk Test Module" href="disk.html" />
    <link rel="prev" title="BIST Overview" href="../overview.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../../index.html" class="icon icon-home"> Kria™ KD240
            <img src="../../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/Kria_doc_map/map.htm">Kria Adventure Map</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/dfx.html">Dynamic Function eXchange</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ipmi_eeprom.html">IPMI EEPROM Design Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/yocto.html">Yocto Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/xen.html">XEN Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kd240-docs.html">Kria KD240</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KD240 Applications</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../bist_landing.html">BIST</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../run.html">Install and Run BIST</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../overview.html">Overview of BIST Application</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview.html#framework">Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overview.html#file-structure">File Structure</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../overview.html#test-modules">Test Modules</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">CAN Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="disk.html">Disk Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="display.html">Display Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="eeprom.html">EEPROM Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="eth.html">Ethernet Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="gpio.html">GPIO Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="i2c.html">I2C Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="iio.html">IIO Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="motor.html">Motor Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="mtd.html">MTD Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pwm.html">PWM Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="spi.html">SPI Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="tpm.html">TPM Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="tty.html">TTY Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="video.html">Video Test Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../overview.html#support">Support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../known_issues.html">Known Issues</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/Xilinx/kria-bist">Software Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bist_landing.html#support">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ros2_multinode_communication_via_tsn/ros2_multinode_communication_via_tsn_landing.html">ROS 2 Multi-Node Communications Via TSN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../foc-motor-ctrl/foc_motor_control_landing.html">FOC Motor Control Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KD240 Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../kria_starterkit_linux_boot.html">Booting Kria Starter Kit Linux on KD240</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../building_the_design.html">Building the Design Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../build_vivado_design.html">Building the Hardware Design Using Vivado</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generating_custom_firmware.html">Generate Custom Firmware</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Kria™ KD240</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../bist_landing.html">BIST</a> &raquo;</li>
          <li><a href="../overview.html">BIST Overview</a> &raquo;</li>
      <li>BIST CAN Test Module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/docs/bist/docs/modules/can.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="bist-can-test-module">
<h1>BIST CAN Test Module<a class="headerlink" href="#bist-can-test-module" title="Permalink to this heading">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The CAN test module verifies the functionality of CAN transceiver on the KD240 starter kit.</p>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this heading">¶</a></h2>
<p>The module contains self-validating functional test. It uses python3-can package for
transmitting and receiving CAN messages through the CAN port (CAN_L, CAN_H and GND pins).
The verification is done by performing transactions between MCP25625 PMOD CAN controller
(connected via SPI to KD240) and zynq_can controller on the kit. For the ‘can_bus_send’
test, CAN message is sent from the CAN port on the kit and received on the PMOD CAN port.
Based on the comparison of sent and received messages, CAN transmit functionality is
verified on the board. Similarly, for ‘can_bus_receive’ test, the PMOD CAN port sends the
CAN messages and zynq_can CAN port on the kit receives the messages. Based on the comparison
of sent and received messages, CAN receive functionality is verified.</p>
<p>The config parameters for the test are described below:</p>
<ul class="simple">
<li><p>label: Test label</p></li>
<li><p>can_transmitter: CAN message transmitter</p></li>
<li><p>can_receiver: CAN message receiver</p></li>
</ul>
<p>The run_can_transmission_test() functional test obtains CAN node for transmitter and
receiver through get_can_node() function based on the controller information. CAN nodes
are then initialized by setting baudrate, buffer length, etc for communication through
can_node_initialize(). CAN messages are sent and received through send_can_message() and
read_can_message() functions via can_bus.send() and can_bus.recv() instances provided by
python3-can module. After the comparison of sent and received messages, the can nodes are
shutdown using can_node_shutdown().</p>
</div>
<div class="section" id="test-execution">
<h2>Test Execution<a class="headerlink" href="#test-execution" title="Permalink to this heading">¶</a></h2>
<p>The example commands for this module are provided below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest-3 --board kd240 -m can  // Run all tests <span class="k">in</span> this module
pytest-3 --board kd240 -k can_bus_send  // Run CAN message transmitter functional <span class="nb">test</span>
pytest-3 --board kd240 -k can_bus_receive  // Run CAN message receiver functional <span class="nb">test</span>
</pre></div>
</div>
<p>The CAN functional test prints the CAN node enumeration of the form canX for transmitter
and receiver nodes along with the message transmitted and received. The test is passed based
on message match between the sent and received CAN messages.</p>
</div>
<div class="section" id="test-debug">
<h2>Test Debug<a class="headerlink" href="#test-debug" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Verify the hardware connection between CAN port on the starter kit and PMOD CAN device
(Connected externally to the starter kit) before performing the CAN transactions.</p></li>
</ul>
</div>
<div class="section" id="known-issues-and-limitations">
<h2>Known Issues and Limitations<a class="headerlink" href="#known-issues-and-limitations" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>The CAN module is limited to verifying the functionality of CAN transceiver hardware ports only.</p></li>
<li><p>Make sure that the BIST firmware is loaded before performing the CAN transaction. The PMOD CAN port
is not recognized otherwise.</p></li>
</ul>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<ol class="simple">
<li><p><a class="reference internal" href="../overview.html"><span class="doc">BIST Overview</span></a></p></li>
</ol>
<p class="sphinxhide" align="center"><sub>Copyright © 2023 Advanced Micro Devices, Inc</sub></p><p class="sphinxhide" align="center"><sup><a href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></sup></p></div>
</div>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../overview.html" class="btn btn-neutral float-left" title="BIST Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="disk.html" class="btn btn-neutral float-right" title="BIST Disk Test Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on March 21, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>