<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Known issues &amp; limitations &mdash; Kria™ KD240 1.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Booting Kria Starter Kit Linux on KD240" href="../../kria_starterkit_linux_boot.html" />
    <link rel="prev" title="Software Architecture of the Platform" href="sw_arch.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Kria™ KD240
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/dfx.html">Dynamic Function eXchange</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ipmi_eeprom.html">IPMI EEPROM Design Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/yocto.html">Yocto Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/xen.html">XEN Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kd240-docs.html">Kria KD240</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KD240 Applications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../bist/bist_landing.html">BIST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ros2_multinode_communication_via_tsn/ros2_multinode_communication_via_tsn_landing.html">TSN ROS Pub Sub</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../foc_motor_control_landing.html">FOC Motor Control Application</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../foc_motor_control_landing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foc_motor_control_landing.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foc_motor_control_landing.html#tutorials">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foc_motor_control_landing.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foc_motor_control_landing.html#repository">Repository</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../foc_motor_control_landing.html#other">Other</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Known issues &amp; limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-motor-control-application">Debugging Motor Control Application</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KD240 Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../kria_starterkit_linux_boot.html">Booting Kria Starter Kit Linux on KD240</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building_the_design.html">Building the Design components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build_vivado_design.html">Building the Hardware design using Vivado</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generating_custom_firmware.html">Generate Custom Firmware</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Kria™ KD240</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../foc_motor_control_landing.html">FOC Motor Control Application</a> &raquo;</li>
      <li>Known issues &amp; limitations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/foc-motor-ctrl/docs/known_issues.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="../../media/xilinx-logo.png" width="30%"/><h1> Kria&trade; KD240 Drives Starter Kit <br>FOC Motor Control Application Tutorial</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Known Issues and Debug help</h1> </td>
 </tr>
</table><div class="section" id="known-issues-limitations">
<h1>Known issues &amp; limitations<a class="headerlink" href="#known-issues-limitations" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p>QEI reported speed is showing glitches. QEI library computation of the speed
has a known issue and will be addressed with a QEI library update.</p></li>
<li><p>Motor lower speed mode control capability is approximately 250 rpms.</p></li>
<li><p>Default motor tuning values are provided for the KD240 Motor Accessory Kit
based the Anaheim motor with the plastic disk visual load. This load disk
primarily acts as an inertial load and thus if users are connecting other loads
to their motor they should plan on conducting their own tuning process and
defining custom tuning defaults based on their load testing.</p></li>
<li><p>Open-loop control mode is intended as a test mode and thus does not implement
any SW based ramp control. Users will see fault protections triggered if immediately
trying to set open-loop mode control with a Vq voltage &gt; ~10V. If using open-loop
user is responsible for incrementally stepping up the Vq command to their desired
voltage setting.  Typical use-cases of open-loop mode have Vd set to 0V.</p></li>
<li><p>DC link current reading is limited to reading analog values &gt; ~0.5A due to a
limitation in the KD240 HW. Users should not assume DC link current feedback is
accurate until it is &gt; ~0.5A.</p></li>
<li><p>If the bokeh server is stopped while the motor is running, the motor will not
stop. The motor should be stopped through the GUI by switching to Off mode
before stopping the bokeh server.</p></li>
</ul>
</div>
<div class="section" id="debugging-motor-control-application">
<h1>Debugging Motor Control Application<a class="headerlink" href="#debugging-motor-control-application" title="Permalink to this heading">¶</a></h1>
<p>If the motor control application is not functioning as intended, follow these
debugging steps to diagnose and resolve issues.</p>
<ol>
<li><p><strong>Check Wire Connections</strong></p>
<ul class="simple">
<li><p>Ensure that wire connections matches the configuration shown in
the application deployment page.</p></li>
<li><p>Verify that the 24V DC supply is connected and the wall power is up.</p></li>
<li><p>Check DS9 LED, which represents the DC link; it should be in a high state.</p></li>
<li><p>Confirm that the Quadrature Encoder Interface (QEI) encoder from the motor
is properly connected to the board.</p></li>
</ul>
</li>
<li><p><strong>Read DC Link Voltage</strong></p>
<ul>
<li><p>If the application repeatedly fails to start with system faults,
measure the DC link voltage by reading data from the ADC interface
(ADC-HUB voltage channel 6).</p></li>
<li><p>Use the command <code class="docutils literal notranslate"><span class="pre">iio_attr</span> <span class="pre">-c</span> <span class="pre">xilinx_adc_hub</span> <span class="pre">voltage6</span></code> to check the
voltage reading and should read around 24V.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>iio_attr -c xilinx_adc_hub voltage6
dev <span class="s1">&#39;xilinx_adc_hub&#39;</span>, channel <span class="s1">&#39;voltage6&#39;</span> <span class="o">(</span>input<span class="o">)</span>, attr <span class="s1">&#39;input&#39;</span>, value <span class="s1">&#39;25.116806030&#39;</span>
</pre></div>
</div>
</li>
</ul>
<p>A reading significantly lower or higher than the tolerance range of the power
supply could indicate a hardware failure on the board.</p>
</li>
<li><p><strong>Debug PL Interfaces</strong></p>
<ul class="simple">
<li><p>If unexpected behavior occurs, start probing different blocks of the
Programmable Logic (PL) interfaces for debugging.</p></li>
<li><p>Utilize IIO utilities or the IIO driver sysfs for the specific hardware
interface.</p></li>
<li><p>Refer to the <a class="reference external" href="./sw_arch.md#device-and-channel-attributes">Device and Channel Attributes</a>
section for detailed information on debugging hardware interfaces.</p></li>
</ul>
</li>
<li><p><strong>Gate Drive Mode</strong></p>
<ul class="simple">
<li><p>Ensure that the software application is set to a valid mode that turns
the Gate Drive ON, except for the off mode.</p></li>
<li><p>Monitor DS10 LED; it should go high in modes other than off.</p></li>
</ul>
</li>
<li><p><strong>Observe Errors and Messages from the Application</strong></p>
<ul class="simple">
<li><p>Keep an eye on the serial console for error messages or other relevant
information.</p></li>
<li><p>Review <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> logs, which provide valuable information from the respective
hardware drivers. These logs can be a helpful source of diagnostic information.</p></li>
</ul>
</li>
<li><p><strong>Network Connection</strong></p>
<ul class="simple">
<li><p>If the application doesn’t respond to changes from the GUI, verify the network
connection by pinging the host address.</p></li>
<li><p>Sometimes, a web socket disconnection message may appear, indicating a
communication issue. If you encounter such disconnection issues, try killing the
Bokeh server and relaunching the server and the dashboard.</p></li>
</ul>
<p>Sample Disconnection Message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2023</span>-09-13 <span class="m">18</span>:47:32,361 WebSocket connection closed: <span class="nv">code</span><span class="o">=</span>None, <span class="nv">reason</span><span class="o">=</span>None
</pre></div>
</div>
</li>
</ol>
<!---

Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License.

You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.

--><p class="sphinxhide" align="center">Copyright&copy; 2023 Advanced Micro Devices, Inc</p></div>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sw_arch.html" class="btn btn-neutral float-left" title="Software Architecture of the Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../kria_starterkit_linux_boot.html" class="btn btn-neutral float-right" title="Booting Kria Starter Kit Linux on KD240" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on September 20, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>