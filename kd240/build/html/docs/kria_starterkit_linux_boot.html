<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Booting Kria Starter Kit Linux on KD240 &mdash; Kria™ KD240 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tool Flow Overview" href="building_the_design.html" />
    <link rel="prev" title="Board Setup and Application Deployment" href="ros2_multinode_communication_via_tsn/src/app_deployment.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../index.html" class="icon icon-home"> Kria™ KD240
            <img src="../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Landing Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/Kria_doc_map/map.htm">Kria Adventure Map</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ubuntu_support.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/bootfw.html">Boot Firmware</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/openamp.html">OpenAMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/dfx.html">Dynamic Function eXchange</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/ipmi_eeprom.html">IPMI EEPROM Design Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/yocto.html">Yocto Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/xen.html">XEN Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kd240-docs.html">Kria KD240</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kv260-docs.html">Kria KV260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260-docs.html">Kria KR260</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/KRS/">Kria Robotics Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KD240 Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bist/bist_landing.html">BIST</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros2_multinode_communication_via_tsn/ros2_multinode_communication_via_tsn_landing.html">ROS 2 Multi-Node Communications Via TSN</a></li>
<li class="toctree-l1"><a class="reference internal" href="foc-motor-ctrl/foc_motor_control_landing.html">FOC Motor Control Application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">KD240 Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Booting Kria Starter Kit Linux on KD240</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot-process">Boot Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#known-issues">Known Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous-information">Miscellaneous Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="building_the_design.html">Building the Design Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_vivado_design.html">Building the Hardware Design Using Vivado</a></li>
<li class="toctree-l1"><a class="reference internal" href="generating_custom_firmware.html">Generate Custom Firmware</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Kria™ KD240</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="ros2_multinode_communication_via_tsn/ros2_multinode_communication_via_tsn_landing.html">ROS 2 Multi-Node Communications Via TSN</a> &raquo;</li>
      <li>Booting Kria Starter Kit Linux on KD240</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/docs/kria_starterkit_linux_boot.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="booting-kria-starter-kit-linux-on-kd240">
<h1>Booting Kria Starter Kit Linux on KD240<a class="headerlink" href="#booting-kria-starter-kit-linux-on-kd240" title="Permalink to this heading">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This document shows how to boot the Kria Starter Kit Linux on KD240 and perform common one-time updates and installations required prior to running any AMD-released KD240 application in Linux. This targets booting Ubuntu® 22.04.</p>
</div>
<div class="section" id="boot-process">
<h2>Boot Process<a class="headerlink" href="#boot-process" title="Permalink to this heading">¶</a></h2>
<ol>
<li><p>Flash the Kria Starter Kit Linux image into the SD card (minimum 16 GB).</p>
<p>Refer to the <a class="reference external" href="https://www.amd.com/kd240-start">KD240 Getting Started Page</a> to flash the SD card with an Ubuntu 22.04 image.</p>
<p>You can reuse the same SD card to evaluate all the applications released for Ubuntu 22.04.</p>
</li>
<li><p>Set up the hardware. Each application will require a different set of peripherals; the following list shows the minimum required to boot Linux.</p>
<p><img alt="KD240" src="../_images/KD2401.png" /></p>
<ul>
<li><p>microSD:</p>
<p>Insert the SD card into the slot at J11.</p>
</li>
<li><p>UART/JTAG interface:</p>
<p>For interacting and seeing boot-time information, connect a USB debugger to J4. Some applications only run through commands issued through the universal asynchronous receiver-transmitter (UART) interface.</p>
</li>
<li><p>Network connection:</p>
<p>Connect the Ethernet cable from J24 to your local network with DHCP enabled to install the Linux packages.</p>
<blockquote>
<div><p><strong>NOTE:</strong> The image recovery app requires J24.</p>
</div></blockquote>
</li>
</ul>
</li>
<li><p>Ensure that the Starter Kit Boot firmware is up to date.</p>
<p>The SOM Starter Kits have factory preprogrammed boot firmware that is installed and maintained in the SOM QSPI device. Update the boot firmware in the SOM QSPI device to the <code class="docutils literal notranslate"><span class="pre">2022.1</span> <span class="pre">Boot</span> <span class="pre">FW</span></code> Image.</p>
<p>See the <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Boot-Firmware-Updates">Kria Wiki</a> to obtain boot firmware binary and instructions to update QSPI image using xmutil, after the Linux boot.</p>
<p>The QSPI image update persists through power cycles or SD card changes.</p>
</li>
<li><p>Boot Linux on your Starter Kit (Ubuntu) following the instruction from <a class="reference external" href="https://www.amd.com/kd240-start/booting-your-starter-kit.html">this page</a>.</p></li>
<li><p>If not done so yet, perform a system update to pull in the latest kernel and AMD packages. There might be some errors during installation. If you encounter issues, refer to <a class="reference external" href="#known-issues">Known Issues</a>. There are two ways to do this.</p>
<p>Through snap install, for more information, refer to the <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/2057043969/Snaps+-+xlnx-config+Snap+for+Certified+Ubuntu+on+Xilinx+Devices">Xilinx config snap Wiki</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo snap install xlnx-config --classic --channel<span class="o">=</span><span class="m">2</span>.x
</pre></div>
</div>
<p>After xlnx-config snap has been installed, run the Xilinx platform setup script, and follow the prompts.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xlnx-config.sysinit
</pre></div>
</div>
<p>Alternatively, the above can be achieved by manually adding the AMD-specific Ubuntu PPAs, and then performing a system update and upgrade to pull in the latest AMD libraries. An apt upgrade step might take some time.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo add-apt-repository ppa:xilinx-apps
sudo add-apt-repository ppa:ubuntu-xilinx/sdk
sudo apt update
sudo apt upgrade
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> If the kernel was updated, make sure to follow the apt upgrade instruction (and command such as <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">reboot</span></code>) to reboot the platform to boot with the latest kernel.</p>
</div></blockquote>
</li>
<li><p>Some Ubuntu 22.04 applications are deployed as Docker containers. Follow the instructions from <a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/">docker.com</a> to install Docker.</p>
<p>Enable the user to properly use the Docker commands without using sudo for every Docker command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupadd docker
sudo usermod -a -G docker  <span class="nv">$USER</span>
</pre></div>
</div>
<p>This is only needed to be done once if reusing the same SD card for running multiple applications.</p>
</li>
</ol>
<p>This flow is only needed to be done once if reusing the same SD card for multiple applications. However, you can choose to update and upgrade again to install newly available updates that are made available later.</p>
</div>
<div class="section" id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this heading">¶</a></h2>
<ol>
<li><p>Sometimes, Ubuntu has a background process ongoing by the time it boots to command prompt and does not yet ask you to change the password. In such cases, doing a snap install might result in a message similar to the following:</p>
<p><code class="docutils literal notranslate"><span class="pre">error:</span> <span class="pre">too</span> <span class="pre">early</span> <span class="pre">for</span> <span class="pre">operation,</span> <span class="pre">device</span> <span class="pre">not</span> <span class="pre">yet</span> <span class="pre">seeded</span> <span class="pre">or</span> <span class="pre">device</span> <span class="pre">model</span> <span class="pre">not</span> <span class="pre">acknowledged</span></code></p>
<p>Try again in a minute or two, and you should be prompted to update the password and above error should disappear.</p>
</li>
<li><p>If a prompt similar to the following appears:</p>
<p><img alt="kernel" src="../_images/kernelflash.png" /></p>
<p>Choose <strong>keep the local version currently installed</strong>. For more details, refer to <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/2116354051/Tips+Tricks+for+Certified+Ubuntu+AMD-Xilinx+Devices#Understanding-the-Configuring-flash-kernel-Prompts-When-Updating-the-Linux-Kernel">this wiki page</a>.</p>
</li>
<li><p>During the <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">xlnx-config.sysinit</span></code> or <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">upgrade</span></code> commands, you might see the following errors and exit installation. Rerun the commands, and the installation should continue and complete.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>flash-kernel: deferring update (trigger activated)
/etc/kernel/postinst.d/zz-flash-kernel:
flash-kernel: deferring update (trigger activated)
Errors were encountered while processing:
flash-kernel
need restart is being skipped since dpkg has failed
E: Sub-process /usr/bin/dpkg returned an error code (1)
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="miscellaneous-information">
<h2>Miscellaneous Information<a class="headerlink" href="#miscellaneous-information" title="Permalink to this heading">¶</a></h2>
<p>The <em>ubuntu</em> user does not have root privileges. Most commands used in the tutorials must be run using <em>sudo</em>, and you might be prompted to enter your password.</p>
<p>For security, by default, the root user is disabled. If you want to login as a root user, perform the following steps. Use the <em>ubuntu</em> user’s password on the first password prompt, then set a new password for the root user. You can now login as a root user using the newly set root user password.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ubuntu@kria:<span class="se">\~\$</span> sudo -i
sudo<span class="se">\]</span> password <span class="k">for</span> ubuntu:
root@kria:<span class="se">\~</span><span class="c1">#</span>
</pre></div>
</div>
<p>If needed, the following commands are used to set the System Timezone and locale:</p>
<ul>
<li><p>Set timezone:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo timedatectl set-ntp <span class="nb">true</span>
sudo timedatectl set-timezone America/Los_Angeles
timedatectl
</pre></div>
</div>
</li>
<li><p>Set locale:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo locale-gen en_US en_US.UTF-8
sudo update-locale <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
locale
</pre></div>
</div>
</li>
</ul>
<p>The following example command sets the date and time:</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">date</span> <span class="pre">--set</span> <span class="pre">&quot;11</span> <span class="pre">January</span> <span class="pre">2023</span> <span class="pre">16:47:00&quot;</span></code></p>
<p>The storage volume on the SD card can be limited with multiple Dockers. If there are space issues, use the following command to remove the existing container.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo docker rmi --force <span class="nv">$INSTALLED_DOCKER_IMAGE</span>
</pre></div>
</div>
<p class="sphinxhide" align="center">Copyright&copy; 2023 Advanced Micro Devices, Inc</p></div>
</div>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ros2_multinode_communication_via_tsn/src/app_deployment.html" class="btn btn-neutral float-left" title="Board Setup and Application Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="building_the_design.html" class="btn btn-neutral float-right" title="Tool Flow Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on January 18, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>